(()=>{var __webpack_modules__={127:(e,t,s)=>{"use strict";var a=s(5388),n=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),r=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new a("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==n.exec(e)||null!==r.exec(e))},construct:function(e){var t,s,a,i,o,c,l,d,u=0,p=null;if(null===(t=n.exec(e))&&(t=r.exec(e)),null===t)throw new Error("Date resolve error");if(s=+t[1],a=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(s,a,i));if(o=+t[4],c=+t[5],l=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(p=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(p=-p)),d=new Date(Date.UTC(s,a,i,o,c,l,u)),p&&d.setTime(d.getTime()-p),d},instanceOf:Date,represent:function(e){return e.toISOString()}})},849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBackgroundPage=function(){return chrome.extension.getBackgroundPage()}},856:(e,t)=>{"use strict";let s;Object.defineProperty(t,"__esModule",{value:!0}),t.checkForForbiddenDomain=async function(e,t){let a=null,n=null;try{a=new URL(e).hostname}catch(e){}if(t)try{n=new URL(t).hostname}catch(e){}const r=await new Promise((function(e,t){s?e(s):fetch("/forbidden-domains.json").then((e=>e.json())).then((t=>{t?(s=t,e(s)):console.log('File "/forbidden-domains.json" not found.')}))}));return r.indexOf(a)>-1||r.indexOf(n)>-1}},1045:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configFile=void 0,t.localSave=function(e){chrome.storage.local.set(e).catch((()=>{chrome.runtime.lastError&&console.log(chrome.runtime.lastError.message)}))},t.ApiClientIdentification=function(){return"_clientId=BE_CHROME&_clientVersion="+n.version},t.validateMatchPattern=function(e){return!0},t.openPopup=function(e,t,s,n,r,i){(0,a.isMacintosh)()||(t+=16);const o={url:chrome.runtime.getURL(e),type:"panel",width:t,height:s,left:r,top:i};chrome.windows.create(o).then((e=>new Promise((()=>{const t=(s,a)=>{"complete"===a.status&&s===e.tabs[0].id&&(n(e),chrome.tabs.onUpdated.removeListener(t))};chrome.tabs.onUpdated.addListener(t)}))))};const a=s(2930),n=chrome.runtime.getManifest();t.configFile="/config.json","mbopgmdnpcbohhpnfglgohlbhfongabi"!==chrome.runtime.id&&(t.configFile="/config_dev.json")},1084:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalState=t.functionalIconBlinkMode=void 0,t.functionalIconBlinkMode=!1,t.globalState={declaredVars:{},functionalIconBlinkMode:!1}},1109:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRecordingName=function(){return`RECORD ${(new Date).toISOString().replace("T"," ").replace(/:/g,".").replace("Z","")}`}},1131:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteDebuggerSession=void 0;const a=s(7857),n=s(8882),r=s(6634),i=s(1913),o=s(1084),c=(0,i.getRecorder)({});t.RemoteDebuggerSession=class{port;replayingWindow;variables={};structuredVariables={};initialVariables={};playback;extCommand;platFormInfo;publishUrl;publishSessionId;constructor(e){this.port=e,e.onMessage.addListener((e=>this.listener(e))),e.onDisconnect.addListener(this.handlePortDisconnection),this.extCommand=new n.ExtCommand,this.playback=new r.PlaybackApi(this.extCommand,{updateCommandStatus:this.updateCommandStatus.bind(this),updateStatus:this.updateStatus.bind(this),successFullReplay:this.successFullReplay.bind(this),failedReplay:this.failedReplay.bind(this),switchOnReplayStatus:this.switchOnReplayStatus.bind(this)}),chrome.runtime.onMessage.addListener(this.messageListener)}handlePortDisconnection=()=>{console.info("Disconnected port ",this.port),chrome.runtime.onMessage.removeListener(this.messageListener)};messageListener=e=>{if(e.selectTarget)this.objectPicked(e);else{if(e.cancelSelectTarget)return(0,a.forAllTabs)((e=>chrome.tabs.sendMessage(e.id,{selectMode:!0,selecting:!1}).catch((()=>{})))),void this.port.postMessage({type:"event",event:"pickerCancel"});if(e.command&&this.replayingWindow)switch(e.command){case"changeWindowSize":const[t,s]=e.value;this.resizeWindow(this.replayingWindow,t,s);break;case"maximizeWindow":this.maximizeWindow(this.replayingWindow)}}};async startReplay(){c.replayStatus="replaying";const e=await this.initReplayWindow();chrome.tabs.onActivated.addListener(this.tabsOnActivatedHandler),await this.extCommand.init(),await this.attachPrompt(e),await this.switchToWindow(e),this.replayingWindow=e,await this.playback.playSuite(void 0,0)}stopReplay(){c.replayStatus="stopped",this.playback.stop(),this.playback.replayStatus="stop",this.detachPromptAllTabs(),chrome.tabs.onActivated.removeListener(this.tabsOnActivatedHandler),this.closeReplayWindow(),this.switchOnReplayStatus("stopped")}async attachPrompt(e){const t=(await chrome.tabs.query({windowId:e,active:!0}))[0];await chrome.tabs.sendMessage(t.id,{command:"attachPrompt"}).catch((()=>{}))}detachPromptAllTabs(){chrome.tabs.query({}).then((e=>{for(const t of e)chrome.tabs.sendMessage(t.id,{command:"detachPrompt"}).catch((()=>{}))}))}async switchToWindow(e){await chrome.windows.update(e,{focused:!0})}resizeWindow(e,t,s){const a={state:"normal",left:0,top:0,width:t,height:s};return chrome.windows.update(e,a)}maximizeWindow(e){return chrome.windows.update(e,{state:"maximized"})}async setPlatFormInfo(){return new Promise((e=>{chrome.runtime.getPlatformInfo((t=>{this.platFormInfo=t,e(t)}))}))}isMacOs(){return"mac"===this.platFormInfo.os}async initReplayWindow(){await this.setPlatFormInfo();const e=await chrome.windows.create({top:0,left:0,state:"normal"});return this.extCommand.setContentWindowId(e.id),chrome.windows.onRemoved.addListener((t=>{t===e.id&&"stop"!==this.playback.replayStatus&&this.stopReplay()})),e.id}async closeReplayWindow(){this.replayingWindow&&(await chrome.windows.remove(this.replayingWindow),this.replayingWindow=void 0)}listener(e){if("request"===e.type)switch(e.command){case"initialize":this.playback.setModel(e.arguments.scenario),this.initialVariables=e.arguments.variables,this.variables=e.arguments.variables,this.structuredVariables=e.arguments.structuredVariables,this.playback.breakPoints=[],this.playback.skippedSteps=[];break;case"initializePublish":console.log(e),this.publishUrl=e.arguments.publishUrl,this.publishSessionId=e.arguments.sessionId;break;case"updateModel":this.playback.setModel(e.arguments.scenario);break;case"terminate":this.stopReplay();break;case"pause":this.playback.pause();break;case"resume":case"continue":this.playback.resume();break;case"stepIn":this.shouldInitTest()?(this.initTest(),o.globalState.declaredVars={...this.variables,structuredVariables:this.structuredVariables}):this.playback.stepIn();break;case"stepOut":this.shouldInitTest()?(this.initTest(),o.globalState.declaredVars={...this.variables,structuredVariables:this.structuredVariables,"@@publish-url":this.publishUrl,"@@publish-session-id":this.publishSessionId}):this.playback.stepOut();break;case"launch":"pause"===this.playback.replayStatus||"breakpoint"===this.playback.replayStatus?this.playback.resume():(this.variables={...this.initialVariables},o.globalState.declaredVars={...this.variables,structuredVariables:this.structuredVariables,"@@publish-url":this.publishUrl,"@@publish-session-id":this.publishSessionId},this.startReplay());break;case"next":this.shouldInitTest()?(this.initTest(),o.globalState.declaredVars={...this.variables,structuredVariables:this.structuredVariables,"@@publish-url":this.publishUrl,"@@publish-session-id":this.publishSessionId}):this.playback.next();break;case"setIsSkipped":e.arguments.value?this.playback.skippedSteps.push(e.arguments.compositeId):this.playback.skippedSteps=this.playback.skippedSteps.filter((t=>JSON.stringify(t)!==JSON.stringify(e.arguments.compositeId)));break;case"setBreakpoint":e.arguments.value?this.playback.breakPoints.push(e.arguments.compositeId):this.playback.breakPoints=this.playback.breakPoints.filter((t=>JSON.stringify(t)!==JSON.stringify(e.arguments.compositeId)));break;case"executeStep":this.playback.playSingleCommand(e.arguments.compositeId);break;case"pickObject":(0,a.forAllTabs)((e=>chrome.tabs.sendMessage(e.id,{selectMode:!0,selecting:!0}).catch((()=>{}))));break;case"cancelPickObject":(0,a.forAllTabs)((e=>chrome.tabs.sendMessage(e.id,{selectMode:!0,selecting:!1}).catch((()=>{}))));break;case"highlightObject":(0,a.forAllTabs)((t=>chrome.tabs.sendMessage(t.id,e).catch((()=>{}))));break;case"readVariables":const t=[];for(const s of e.arguments.variables){const e=s.substring(2,s.length-1);e&&t.push({name:e,value:this.variables[e]})}this.variablesRead(t);break;case"setVariable":this.variables[e.arguments.variable.name]=e.arguments.variable.value;break;default:console.log("Wat?",e.command)}}successFullReplay(){this.port.postMessage({type:"event",event:"exited",body:{exitCode:0}}),this.playback.replayStatus="stop",this.closeReplayWindow()}failedReplay(e){this.port.postMessage({type:"event",event:"exited",body:{exitCode:1,reason:e}}),this.playback.replayStatus="stop",this.closeReplayWindow()}updateCommandStatus(e){this.port.postMessage({type:"event",event:"status",body:{identifier:e.identifier,status:e.status,error:e.reason,nextStepId:e.nextStepId,successLocator:e.successLocator}})}updateStatus(e){this.port.postMessage({event:"updateStatus",status:e})}switchOnReplayStatus(e){this.port.postMessage({type:"event",event:"playbackStatus",body:{status:e}})}objectPicked(e){this.port.postMessage({type:"event",event:"objectPicked",body:e}),(0,a.forAllTabs)((e=>chrome.tabs.sendMessage(e.id,{selectMode:!0,selecting:!1}).catch((()=>{}))))}variablesRead(e){this.port.postMessage({type:"event",event:"variablesRead",body:e})}tabsOnActivatedHandler(e){chrome.tabs.sendMessage(e.tabId,{command:"attachPrompt"}).catch((()=>{}))}shouldInitTest(){return!this.playback.frames.length&&"stop"===this.playback.replayStatus}initTest(){this.variables={...this.initialVariables},chrome.tabs.onActivated.addListener(this.tabsOnActivatedHandler),this.initReplayWindow().then((e=>{this.attachPrompt(e),this.switchToWindow(e),this.replayingWindow=e,this.playback.initSuite()}))}}},1132:()=>{},1231:e=>{"use strict";function t(e,t){var s="",a=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(s+='in "'+e.mark.name+'" '),s+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(s+="\n\n"+e.mark.snippet),a+" "+s):a}function s(e,s){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=s,this.message=t(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s.prototype.toString=function(e){return this.name+": "+t(this,e)},e.exports=s},1308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ard=void 0,t.Ard=class{ardUrl;constructor(e){this.ardUrl=e}async createTest(e){const t=`${this.ardUrl}/tests`,s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return(await s.json()).result}}},1461:(e,t,s)=>{"use strict";var a=s(8433),n=s(5388),r=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),i=/^[-+]?[0-9]+e/;e.exports=new n("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!r.test(e)||"_"===e[e.length-1])},construct:function(e){var t,s;return s="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===s?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:s*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||a.isNegativeZero(e))},represent:function(e,t){var s;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(a.isNegativeZero(e))return"-0.0";return s=e.toString(10),i.test(s)?s.replace("e",".e"):s},defaultStyle:"lowercase"})},1769:(e,t,s)=>{"use strict";e.exports=s(6184)},1851:(e,t,s)=>{"use strict";var a=s(5388);e.exports=new a("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},1913:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecorder=l;const a=s(9378),n=s(4508),r=s(3701),i=s(6907),o={};let c;function l(e){return o.cRecorder}o.cRecorder=new i.BackgroundRecorderUI,chrome.runtime.getManifest(),chrome.action.setBadgeText({text:""}),chrome.action.setBadgeBackgroundColor({color:"#d90a16"}),chrome.contextMenus.onClicked.addListener((e=>{c&&c.postMessage({cmd:e.menuItemId})})),chrome.runtime.onConnect.addListener((e=>{c=e})),chrome.runtime.onMessage.addListener((function(e,t,s){if(e.command){const i=l();switch(e.command){case"start_recording":e.suite_name&&e.recordingTab?i.startRecording(e.suite_name,e.recordingTab):s({status:"Bad Request",error:!0}),s({status:"ok",error:!1});break;case"pause_recording":i.pauseRecording(),s({status:"ok",error:!1});break;case"resume_recording":i.resumeRecording(),s({status:"ok",error:!1});break;case"reset_recording":i.cleanRecording(),s({status:"ok",error:!1});break;case"recordCommand":i.addCommandMessageHandler(e,t,s);break;case"recordDom":console.log("reqdom: ",e.dom),i.recordedDomSet.add(e.dom);const o=i.currentSuite.test_cases.length-1,c=i.currentSuite.test_cases[o].commands.length-1;i.recordedDomMapping[o]=i.recordedDomMapping[o]||[],i.recordedDomMapping[o][c]=Array.from(i.recordedDomSet).indexOf(e.dom);case"add_step_atindex":e.testCaseIndex&&e.commandIndex&&e.step?(i.addCommand(e.testCaseIndex,e.commandIndex,e.step),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"check_status":let l=!1;t.tab&&t.tab.id&&i.recordingTab&&(i.recordingTab.id===t.tab.id||i.openedTabIds&&void 0!==i.openedTabIds[t.tab.id])&&(l=!0),s({status:"ok",recording:i.recording,recordingTab:i.recordingTab,isThisTabRecording:l,replayStatus:i.replayStatus,error:!1});break;case"open_debugger":i.debuggerTab=t.tab,i.currentSuite.addObserver(t.tab),i.addObserver(t.tab),s({status:"ok",error:!1});break;case"close_debugger":i.debuggerTab=null,i.removeObserver(t.tab.id),i.currentSuite.removeObserver(t.tab.id),s({status:"ok",error:!1});break;case"get_debuggerTab":s({status:"ok",debuggerTab:i.debuggerTab,error:!1});break;case"getCurrentSuite":s({status:"ok",suite:i.currentSuite,error:!1});break;case"dumpCurrentSuiteYaml":return(0,n.getSuiteYAML)(i.currentSuite,!0).then((e=>{const t=(0,a.getNameSeleniumFile)();s({status:"ok",filename:t,yaml:e})})),!0;case"getExportJsonSuite":s({status:"ok",suite:i.exportJson(),error:!1});break;case"updateSuiteName":e.suiteName?(i.updateSuiteName(e.suiteName),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"updateTestCases":e.testCases?(i.updateTestCases(e.testCases),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"getTransactions":const d=i.getTransactions();s({status:"ok",transactions:d,error:!1});break;case"addTestCase":e.testCaseName?(i.addNewTestCase(e.testCaseName),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"updateTestCaseName":null!=e.testCaseName&&null!=e.testCaseIndex?(i.updateTestCaseName(e.testCaseIndex,e.testCaseName),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"addObserverRecorder":i.addObserver(t.tab),s({status:"ok",error:!1});break;case"removeObserverRecorder":i.removeObserver(t.tab.id),s({status:"ok",error:!1});break;case"updateBadgeCounter":e.badgeCounter?(i.updateBadgeCounter(e.badgeCounter),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"getReplayWindowId":s({status:"ok",error:!1,replayWindowId:i.replayWindowId});break;case"setReplayWindowId":e.replayWindowId?(i.replayWindowId=e.replayWindowId,s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"updateCommandProperty":e.testCaseIndex&&e.commandIndex&&e.commandProperty&&e.value?(i.updateCommandProperty(e.testCaseIndex,e.commandIndex,e.commandProperty,e.value),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"deleteCommand":e.testCaseIndex&&e.commandIndex?(i.deleteCommand(e.testCaseIndex,e.commandIndex),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"updateCommandIndex":e.testCaseIndex&&e.commandToIndex&&e.commandFromIndex?(i.updateCommandIndex(e.testCaseIndex,e.commandFromIndex,e.commandToIndex),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"deleteTestCase":e.testCaseIndex?(i.deleteTestCase(e.testCaseIndex),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"addTestCaseAtIndex":e.testCaseIndex&&e.testCase?(i.addTestCase(e.testCaseIndex,e.testCase),s({status:"ok",error:!1})):s({status:"Bad request",error:!0});break;case"showNotification":e.message&&e.title?(0,r.create_notification)(e.title,e.message):s({status:"Bad request",error:!0})}s({status:"ok",error:!1})}else if(e.attachRecorderRequest){const e=l();return void("record"===e.recording&&void 0!==e.openedTabIds[t.tab.id]&&chrome.tabs.sendMessage(t.tab.id,{attachRecorder:!0}).catch((()=>{})))}}))},2119:(e,t,s)=>{"use strict";var a=s(1231),n=s(5388);function r(e,t){var s=[];return e[t].forEach((function(e){var t=s.length;s.forEach((function(s,a){s.tag===e.tag&&s.kind===e.kind&&s.multi===e.multi&&(t=a)})),s[t]=e})),s}function i(e){return this.extend(e)}i.prototype.extend=function(e){var t=[],s=[];if(e instanceof n)s.push(e);else if(Array.isArray(e))s=s.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new a("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(s=s.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof n))throw new a("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new a("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new a("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),s.forEach((function(e){if(!(e instanceof n))throw new a("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var o=Object.create(i.prototype);return o.implicit=(this.implicit||[]).concat(t),o.explicit=(this.explicit||[]).concat(s),o.compiledImplicit=r(o,"implicit"),o.compiledExplicit=r(o,"explicit"),o.compiledTypeMap=function(){var e,t,s={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function a(e){e.multi?(s.multi[e.kind].push(e),s.multi.fallback.push(e)):s[e.kind][e.tag]=s.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(a);return s}(o.compiledImplicit,o.compiledExplicit),o},e.exports=i},2197:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateKey=function(e){return`${e.method}${e.requestId}`}},2369:(e,t,s)=>{"use strict";var a=s(5388);e.exports=new a("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},2930:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMacintosh=function(){return navigator.platform.indexOf("Mac")>-1},t.isWindows=function(){return navigator.platform.indexOf("Win")>-1}},3026:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xlateArgument=function(e){let t,s;e=(e=e.replace(/^\s+/,"")).replace(/\s+$/,"");const r=[];if(t=/\${/.exec(e)){const t=/\${(.*?)}/g;let i=0;for(;s=t.exec(e);)void 0!==a.globalState.declaredVars[s[1]]?(s.index-i>0&&r.push(n(e.substring(i,s.index))),r.push(a.globalState.declaredVars[s[1]]),i=t.lastIndex):"nbsp"===s[1]&&(s.index-i>0&&r.push(a.globalState.declaredVars[n(e.substring(i,s.index))]),r.push(nonBreakingSpace()),i=t.lastIndex);return i<e.length&&r.push(n(e.substring(i,e.length))),r.join("")}return n(e)};const a=s(1084);function n(e){return null!=e?e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\"/g,'\\"')).replace(/\r/g,"\\r")).replace(/\n/g,"\\n"):""}chrome.runtime.onMessage.addListener((function(e){e.storeStr?a.globalState.declaredVars[e.storeVar]=e.storeStr:e.echoStr&&console.log("echo: "+e.echoStr)}))},3701:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create_notification=function(e,t){const a={type:"basic",title:e,iconUrl:"../sideex/icons/icons-48.png",message:t,priority:1,isClickable:!0};chrome.notifications.create(a,(e=>{setTimeout((()=>chrome.notifications.clear(e)),s)}))},t.displayNotifications=function(e,t,s,a,n){t&&(chrome.notifications.create("report",{type:"basic",title:"Blazemeter",iconUrl:chrome.runtime.getURL("theme")+"/blazemeter/images/48x48.png",message:e,priority:1,isClickable:!0}),n&&setTimeout((()=>{chrome.notifications.clear("report")}),n)),s&&console.log(e),a&&chrome.runtime.sendMessage({status:e}).catch((()=>{}))};const s=3e3},4024:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestSuite=void 0,t.TestSuite=class{suite_name;test_cases;observers;constructor(e){this.suite_name=e,this.test_cases=[{testStep:"Test",commands:[]}],this.observers=[]}getTestCase(e){return this.test_cases[e]}getTestCaseName(e){return this.test_cases[e].testStep}getLastTestCaseIndex(){return this.test_cases.length-1}getSteps(e){return this.test_cases[e].commands}addNewTestCase(e){const t={testStep:e,commands:[]};this.test_cases.push(t),this.notifyObservers("addTestCase",{testCaseIndex:this.test_cases.length-1})}addCommand(e,t,s){t>=this.test_cases[e].commands.length?this.test_cases[e].commands.push(s):this.test_cases[e].commands.splice(t,0,s),this.notifyObservers("addCommand",{testCaseIndex:e,commandIndex:t})}addTestCase(e,t){e>=this.test_cases.length?this.test_cases.push(t):this.test_cases.splice(e,0,t),this.notifyObservers("addTestCase",{testCaseIndex:e})}assignDomToCommand(e,t,s){this.test_cases[e].commands[t].recordedDom=s,this.notifyObservers("assignDomToCommand",{testCaseIndex:e,commandIndex:t})}addScreenshot(e,t){for(const s of this.test_cases)for(const a of s.commands)if(a.attributes&&a.attributes.recordId===e)return a.attributes.screenshot=t,void delete a.attributes.recordId}deleteTestCase(e){this.test_cases.splice(e,1),this.notifyObservers("deleteTestCase",{testCaseIndex:e})}deleteCommmand(e,t){this.test_cases[e].commands.splice(t,1),this.notifyObservers("deleteCommand",{testCaseIndex:e,commandIndex:t})}updateTestCaseName(e,t){this.test_cases[e].testStep=t,this.notifyObservers("updateTestCaseName",{testCaseIndex:e})}updateTestCases(e){this.test_cases=e,this.notifyObservers()}updateCommand(e,t,s){this.test_cases[e].commands[t]=s,this.notifyObservers("updateCommand",{testCaseIndex:e,commandIndex:t})}updateCommandProperty(e,t,s,a){this.test_cases[e].commands[t][s]=a,this.notifyObservers("updateCommandProperty",{testCaseIndex:e,commandIndex:t,commandProperty:s})}updateCommandIndex(e,t,s){this.test_cases[e].commands.splice(s,0,this.test_cases[e].commands.splice(t,1)[0]),this.notifyObservers("updateCommandIndex",{testCaseIndex:e,commandFromIndex:t,commandToIndex:s})}exportJSON(){return{suite_name:this.suite_name,test_cases:this.test_cases}}loadSuiteJSON(e){this.suite_name=e.suite_name,this.test_cases=e.test_cases}addObserver(e){for(let t=0;t<this.observers.length;t++)if(this.observers[t].id===e.id)return!1;this.observers.push(e)}removeObserver(e){let t;for(let s=0;s<this.observers.length;s++)this.observers[s].id===e&&(t=s);t&&this.observers.splice(t,1)}notifyObservers(e,t){const s=[],a={action:e,indexes:t};for(const e of this.observers)-1===s.indexOf(e.id)&&(chrome.tabs.sendMessage(e.id,{command:"testSuiteNotification",observable:this,options:a}).catch((()=>{})),s.push(e.id))}clearObservers(){this.observers=[]}}},4466:(e,t,s)=>{"use strict";var a=s(8433),n=s(5388);function r(e){return 48<=e&&e<=55}function i(e){return 48<=e&&e<=57}e.exports=new n("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,s,a=e.length,n=0,o=!1;if(!a)return!1;if("-"!==(t=e[n])&&"+"!==t||(t=e[++n]),"0"===t){if(n+1===a)return!0;if("b"===(t=e[++n])){for(n++;n<a;n++)if("_"!==(t=e[n])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(n++;n<a;n++)if("_"!==(t=e[n])){if(!(48<=(s=e.charCodeAt(n))&&s<=57||65<=s&&s<=70||97<=s&&s<=102))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(n++;n<a;n++)if("_"!==(t=e[n])){if(!r(e.charCodeAt(n)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;n<a;n++)if("_"!==(t=e[n])){if(!i(e.charCodeAt(n)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,s=e,a=1;if(-1!==s.indexOf("_")&&(s=s.replace(/_/g,"")),"-"!==(t=s[0])&&"+"!==t||("-"===t&&(a=-1),t=(s=s.slice(1))[0]),"0"===s)return 0;if("0"===t){if("b"===s[1])return a*parseInt(s.slice(2),2);if("x"===s[1])return a*parseInt(s.slice(2),16);if("o"===s[1])return a*parseInt(s.slice(2),8)}return a*parseInt(s,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!a.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},4508:function(e,t,s){"use strict";var a,n=this&&this.__createBinding||(Object.create?function(e,t,s,a){void 0===a&&(a=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,a,n)}:function(e,t,s,a){void 0===a&&(a=s),e[a]=t[s]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||(a=function(e){return a=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},a(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s=a(e),i=0;i<s.length;i++)"default"!==s[i]&&n(t,e,s[i]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.combineYaml=void 0,t.getCombinedYaml=async function(e){const s=await m(e),a=(0,d.getRecorder)({}).currentSuite,n=await f(a);return await(0,t.combineYaml)(n,s)},t.getYamlJmeter=m,t.getYamlJmeterFunctionalTest=function(){return new Promise((e=>{const t=Object.values((0,c.getBackgroundPage)().getTraffic()).sort(((e,t)=>e.timestamp-t.timestamp)),s=(0,l.getJmeterScenarioName)(),a={execution:[{scenario:s}],scenarios:{[s]:{headers:{},requests:[]}}},n=a.scenarios[s].requests,r=a.scenarios[s].headers,i=/\+/g,d=/([^&=]+)=?([^&]*)/g,u=function(e){return decodeURIComponent(e.replace(i," "))};let p=0;t.forEach((function(e,s){let a={url:e.url,method:e.method,label:e.label};if("top_level"===e.request_type&&(s>0&&(p=e.timestamp-t[s-1].timestamp),a["think-time"]=p+"ms"),e.headers&&e.headers.length&&(a.headers={},e.headers.forEach((e=>{a.headers[e.name]=e.value})),0===s?Object.assign(r,a.headers):Object.keys(r).forEach((e=>{a.headers[e]!==r[e]&&delete r[e]}))),e.body){let t=e.body;Array.isArray(t)&&(t=t.join("")),a.body=t}else if("GET"==e.method&&/\?/.test(e.url)){const t=e.url.split("?")[0],s=e.url.split("?")[1];let n;for(a.body={},a.label=t;n=d.exec(s);)a.body[u(n[1])]=u(n[2])}if("POST"==e.method&&/\?/.test(e.url)){const t=e.url.split("?")[0];a.label=t}n.push(a)})),n.forEach((function(e){Object.keys(r).forEach((function(t){delete e.headers[t]}))})),e(o.dump(a))}))},t.getSuiteYAML=f;const o=i(s(7210)),c=s(849),l=s(9378),d=s(1913);function u(e){return"\r\n"+e}function p(e){const t=e.search(/:/g)>=0,s=e.search(/'/g)>=0,a=e.startsWith("#");return!s&&(a||t)}function m(e){return new Promise((function(t){let s=0;const a=Object.values(e).sort(((e,t)=>e.timestamp-t.timestamp));chrome.storage.local.get(["concurrency","record_name","options","transactions"],(function(e){const n=e.record_name,r={execution:[{scenario:n,concurrency:20,"ramp-up":"1m","hold-for":"19m"}],scenarios:{[n]:{headers:{},requests:[]}}};if(e.options.edit_transaction_labels)var i=r.scenarios[n].requests;else var c=r.scenarios[n].requests;const l=r.scenarios[n].headers,d=/\+/g,p=/([^&=]+)=?([^&]*)/g,m=function(e){return decodeURIComponent(e.replace(d," "))};let h=-1,f=0;a.forEach(((t,n)=>{const r={url:t.url,method:t.method,label:t.label};if(t.assertions&&(r.assert=[],t.assertions.forEach((e=>{const t="responseCode"===e.testField?"http-code":"body";r.assert.push({"assume-success":!1,contains:[e.testStrings[0]],not:!1,regexp:!1,subject:t})}))),"top_level"===t.request_type&&(n>0&&(f=t.timestamp-a[n-1].timestamp),r["think-time"]=f+"ms"),t.headers&&t.headers.length&&(r.headers={},t.headers.forEach((function(e){r.headers[e.name]=e.value})),0===n?Object.assign(l,r.headers):Object.keys(l).forEach((function(e){r.headers[e]!==l[e]&&delete l[e]}))),t.body){let e=t.body;Array.isArray(e)&&(e=e.join("")),r.body=e}else if("GET"==t.method&&/\?/.test(t.url)){const e=t.url.split("?")[0],s=t.url.split("?")[1];let a;for(r.body={},r.url=e,r.label=e;a=p.exec(s);)r.body[m(a[1])]=m(a[2])}if(e.options.edit_transaction_labels)if(t.transaction_key>h){t.transaction_key-h>1&&(s+=t.transaction_key-h-1),h=t.transaction_key;const a={transaction:e.transactions[t.transaction_key].name,"force-parent-sample":!1,do:[r]};i.push(a)}else i[t.transaction_key-s].do.push(r);else c.push(r)})),e.options.edit_transaction_labels?i.forEach((e=>{e.do.forEach((e=>{Object.keys(l).forEach((t=>{delete e.headers[t]}))}))})):c.forEach((e=>{Object.keys(l).forEach((t=>{delete e.headers[t]}))}));const g=o.dump(r).replace(/\r?\n/g,"\r\n");let b=u("# Script generated by Blazemeter Chrome Extension")+u("")+u(g);t(b)}))}))}function h(e){const t={click:"clickBy:s",type:"typeBy:sv",typeSecret:"typeSecretBy:sv",sendKeys:"keysBy:sk",assertText:"assertTextBy:sv",assertValue:"assertValueBy:sv",assertTitle:"assertTitle:t",doubleClick:"doubleClickBy:s",contextClick:"contextClickBy:s",mouseDownAt:"mouseDownBy:s",mouseMoveAt:"mouseMoveBy:s",mouseUpAt:"mouseUpBy:s",select:"selectBy:sv",storeText:"storeTextBy:sv",storeTitle:"storeTitle:v",storeValue:"storeValueBy:sv",store:"storeString:sv",submit:"submitBy:s",runScript:"scriptEval:t",close:"closeWindow:t",dragAndDropToObject:"dragBy:sv",echo:"echoString:t",editContent:"editContentBy:sv",selectFrame:"switchFrame:t",selectWindow:"switchWindow:t",pause:"pauseFor:v",mouseOver:"mouseOver:s",mouseOut:"mouseOut:s",answerDialog:"answerDialog:sv",assertDialog:"assertDialog:sv",storeEval:"storeEval:sv",assertEval:"storeEval:t",waitFor:"waitFor:sv"},s={"name=":"Name","linkText=":"LinkText","id=":"ID","css=":"CSS","//":"XPath","xpath=":"XPath","shadow=":"shadow"};let a="";if("open"==e.command)a+=u("      - go("+e.target+")");else if("openWindow"==e.command)a+=u("      - openWindow("+e.target+")");else if("resizeWindow"===e.command)a+=u("      - resizeWindow("+e.value+")");else if("maximizeWindow"===e.command)a+=u("      - maximizeWindow()");else if("store"==e.command)a+=u("      - storeString("+e.target+"): "+e.value);else if(e.command in t){let n=!1;const r=t[e.command].split(":");if("s"==r[1][0]){for(const t in s)if(e.target.startsWith(t.trim()))if(n=!0,t.indexOf("=")>=0?p(e.target)?a+=u("      - '"+r[0]+("waitFor"===r[0]?"By":"")+s[t]+"("+e.target.replace(t,"").trim()+("waitFor"===r[0]?","+e.value:"")+")'"):a+=u("      - "+r[0]+("waitFor"===r[0]?"By":"")+s[t]+"("+e.target.replace(t,"").trim()+("waitFor"===r[0]?","+e.value:"")+")"):p(e.target)?a+=u("      - '"+r[0]+("waitFor"===r[0]?"By":"")+s[t]+"("+e.target.trim()+("waitFor"===r[0]?","+e.value:"")+")'"):a+=u("      - "+r[0]+("waitFor"===r[0]?"By":"")+s[t]+"("+e.target.trim()+("waitFor"===r[0]?","+e.value:"")+")"),2==r.length&&"v"==r[1][1]){let t=e.value.replace(/\\/g,"\\\\");if(t=t.replace(/"/g,'\\"'),t=t.trim().replace(/\r\n|\r|\n/g,"\\n"),"select"==e.command)t=t.replace("label=",""),a+=': "'+t+'"';else if("dragAndDropToObject"==e.command){for(const e in s)t.startsWith(e.trim())&&(t="elementBy"+s[e]+"("+t.replace(e,"").trim()+")");a+=": "+t}else"waitFor"===r[0]?a+=": 10s":a+=': "'+t+'"'}else 2==r.length&&"k"==r[1][1]&&(a+=": "+e.value.replace("${","").replace("}","").trim().replace(/\r\n|\r|\n/g,"\\n"))}else if("t"==r[1])n=!0,p(e.target)?a+=u("      - '"+r[0]+"("+e.target.trim()+")'"):a+=u("      - "+r[0]+"("+e.target.trim()+")");else if("v"==r[1]){n=!0;let t=e.value.replace(/\\/g,"\\\\");t=t.replace(/"/g,'\\"'),t=t.trim().replace(/\r\n|\r|\n/g,"\\n"),"pauseFor"==r[0]?a+=u("      - "+r[0]+"("+t+"s)"):(a+=u("      - "+r[0]+"()"),a+=': "'+t+'"')}n||(a+=u("      # WARN: Selector Not yet supported. ('"+e.command+":"+e.target.trim()+")'"))}else a+=u("      # WARN: Command Not yet supported. ('"+e.command+":"+JSON.stringify(e.target).replace(/\r\n|\r|\n/g,"\\n").trim()+":"+JSON.stringify(e.value).replace(/\r\n|\r|\n/g,"\\n").trim()+"')");return a}function f(e,t){const s=JSON.stringify(e),a=JSON.parse(s);if(t)return async function(e){const t=(0,l.getSeleniumScenarioName)(),s=await chrome.storage.local.get("options").then((e=>e.options)),a={modules:{nose:{"ignore-unknown-actions":!0}},execution:[{executor:"selenium",scenario:t,iterations:1,capabilities:{browserName:"chrome"}}],scenarios:{[t]:{"generate-flow-markers":!0,headless:!1,timeout:"60s","think-time":"0s",requests:e.test_cases.map((e=>({label:e.testStep,actions:e.commands.filter((e=>"contextMenuAt"!==e.command||s.allow_context_clicks)).map((e=>function(e,t){const s={click:"clickBy:s",type:"typeBy:sv",typeSecret:"typeSecretBy:sv",sendKeys:"keysBy:sk",assertText:"assertTextBy:sv",assertValue:"assertValueBy:sv",assertTitle:"assertTitle:t",doubleClick:"doubleClickBy:s",contextClick:"contextClickBy:s",mouseDownAt:"mouseDownBy:s",mouseMoveAt:"mouseMoveBy:s",mouseUpAt:"mouseUpBy:s",select:"selectBy:sv",storeText:"storeTextBy:sv",storeTitle:"storeTitle:v",storeValue:"storeValueBy:sv",store:"storeString:sv",submit:"submitBy:s",runScript:"scriptEval:t",close:"closeWindow:t",dragAndDropToObject:"dragBy:sv",echo:"echoString:t",editContent:"editContentBy:sv",selectFrame:"switchFrame:t",selectWindow:"switchWindow:t",pause:"pauseFor:v",mouseOver:"mouseOver:s",mouseOut:"mouseOut:s",answerDialog:"answerDialog:sv",assertDialog:"assertDialog:sv",storeEval:"storeEval:sv",assertEval:"storeEval:t",waitFor:"waitFor:sv"},a={"name=":"Name","linkText=":"LinkText","id=":"ID","css=":"CSS","//":"XPath","xpath=":"XPath","shadow=":"shadow"};if("clickAt"===e.command?e.command="click":"doubleClickAt"===e.command?e.command="doubleClick":"contextMenuAt"===e.command&&(e.command="contextClick"),"open"===e.command)return{type:"go",param:e.target};if("openWindow"===e.command)return{type:"openWindow",param:e.target};if("resizeWindow"===e.command)return{type:"resizeWindow",param:e.value};if("maximizeWindow"===e.command)return{type:"maximizeWindow"};if("store"===e.command)return{type:"storeString",param:e.target,value:e.value};if("answerDialog"===e.command)return{type:"answerDialog",param:e.target,value:e.value};if("assertDialog"===e.command)return{type:"assertDialog",param:e.target,value:e.value};if("storeEval"===e.command)return{type:"storeEval",param:e.value,value:e.target};if("assertEval"===e.command)return{type:"assertEval",param:e.target,value:e.value};if(e.command in s){let[n,r]=s[e.command].split(":");n.endsWith("By")&&(n=n.slice(0,-2));const i={type:n};if("s"===r[0]){const s="dragAndDropToObject"===e.command?"source":"locators";i[s]=[];const n=Array.isArray(e.targetOptions)?e.targetOptions:[],o=[e.target].concat(n.map((e=>e[0]))),c=Array.from(new Set(o));for(const e of c)for(const n of Object.keys(a))if(e.startsWith(n)){const r=a[n],o="//"===n?e.trim():e.replace(n,"").trim();if(t.disable_id_locators){if("id="===n)break;if("//"===n&&o.includes("[@id="))break;if("css="===n&&o.match(/#\S+/g))break}i[s].push({[r]:o});break}if("v"===r[1]){const t="string"==typeof e.value?e.value.trim():e.value;if("select"===e.command)i.param=t.replace("label=","");else if("dragAndDropToObject"===e.command){const e="target";i[e]=[];for(const s of Object.keys(a))if(t.startsWith(s)){const n=a[s],r="//"===s?t.trim():t.replace(s,"").trim();i[e].push({[n]:r});break}}else if("waitFor"===e.command){let[e,s]=t.split(":",2);s=s||"10s",i.value=s,i.param=e}else i.param=t}else"k"===r[1]&&(i.param=e.value.replace("${","").replace("}","").trim())}else"t"===r[0]?i.param=e.target.trim():"v"===r[0]&&(i.param=e.value.trim(),"pauseFor"===n&&(i.param+="ms"));return e.attributes&&(i.metadata={...e.attributes}),i}return{type:`# WARN: Command Not yet supported. ('${e.command}:${JSON.stringify(e.target).replace(/\r\n|\r|\n/g,"\\n").trim()}:${JSON.stringify(e.value).replace(/\r\n|\r|\n/g,"\\n").trim()}')`}}(e,{disable_id_locators:!s.export_id_locators})))})))}}},n=o.dump(a,{noArrayIndent:!0}),r=u("# Script generated by Blazemeter Chrome Extension")+u("")+u(n.replace(/(\s+)- type:\s"(# WARN:.+)"/g,"$1$2"));return Promise.resolve(r)}(a);const n=(0,l.getSeleniumScenarioName)();let r="";return r+=u("# Script generated by Blazemeter Chrome Extension"),r+=u(""),r+=u("modules:"),r+=u("  nose:"),r+=u("    ignore-unknown-actions: true"),r+=u(""),r+=u("execution:"),r+=u("- executor: selenium"),r+=u("  scenario: "+n),r+=u("  iterations: 1"),r+=u("  capabilities: "),r+=u("    browserName: chrome"),r+=u(""),r+=u("scenarios:"),r+=u("  "+n+":"),r+=u("    generate-flow-markers: true "),r+=u("    headless: false"),r+=u("    timeout: 60s"),r+=u("    think-time: 0s"),r+=u("    requests:"),new Promise((e=>{chrome.storage.local.get(null,(t=>{for(const e of a.test_cases)if(0!==e.commands.length){e.testStep.match(/:/g)?r+=u("    - label: '"+e.testStep+"'"):r+=u("    - label: "+e.testStep),r+=u("      actions:");for(const t of e.commands)r+=h(t)}e(r)}))}))}t.combineYaml=async(e,t)=>{const s=e.split("scenarios:"),a=s[0].replace("iterations: 1","").trim(),n=(await chrome.storage.local.get("record_name")).record_name;let r=t.split(n+":");1===r.length&&(r=t.split(`'${n}':`));const i=(0,l.getJmeterScenarioName)();return u(a)+u("  hold-for: 20m")+u("")+u("- executor: jmeter")+u(`  scenario: ${i}`)+u("  concurrency: 20")+u("  ramp-up: 1m")+u("  hold-for: 19m")+u("")+u(`scenarios:${s[1]}`)+u("")+u(`  ${i}:${r[1]}`)}},4648:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const local_save_1=__webpack_require__(1045),name_utils_1=__webpack_require__(1109),string_utils_1=__webpack_require__(9279),url_utils_1=__webpack_require__(9505),ard_1=__webpack_require__(1308),background_utils_1=__webpack_require__(2197),files_names_formats_1=__webpack_require__(9378),forbidden_domains_1=__webpack_require__(856),generate_yaml_1=__webpack_require__(4508),icons_1=__webpack_require__(5279),notifications_1=__webpack_require__(3701),background_ui_1=__webpack_require__(1913),state_1=__webpack_require__(1084),url_utils_2=__webpack_require__(8424);let traffic={},body={},iconState=!0,op="stopped",uid="",options={},retries=5,debug=!1,counter=0,clearRunning=!1,clearServiceWorkersRunning=!1,modalIsOpened=!1,cache=!1,service_workers=!1,cookie=!1;const manifest=chrome.runtime.getManifest();let dismissed=!1,exportJMX=!1,refreshIntervalId=null,uploadingData=!1,recTestId=null,mode,data,concurrency;const concurrencyByDefault=20,geolocationByDefault="us-central1-a";let UploadTraffic;const version="v4";let configFile="/config.json";"mbopgmdnpcbohhpnfglgohlbhfongabi"!==chrome.runtime.id&&(configFile="/config_dev.json");let useragent=null,isLogged=!1,activeTabId=0,recStart=null,recEnd=null,isCombinedTestFlag=!1,isSeleniumTestFlag=!1,isFunctionalTestFlag=!1,isBrowserPerformanceTestFlag=!1,intervalId,erroredRequestIds=[],isRecording=!1;function googleAnalytics(e,t,s,a){}function localSave(e){chrome.storage.local.set(e).catch((()=>{chrome.runtime.lastError&&(console.log(chrome.runtime.lastError.message),googleAnalytics("send","exception",{exDescription:"notificationError():"+chrome.runtime.lastError.message,exFatal:!1}))}))}function ApiClientIdentification(){return"_clientId=BE_CHROME&_clientVersion="+manifest.version}function recordBlink(){setInterval((()=>{iconState=!iconState,"pause"===op||"waiting"===op||state_1.globalState.functionalIconBlinkMode?(0,icons_1.setIcon)(iconState?"on":"off"):"record"===op||"follow"===op?(0,icons_1.setIcon)("on"):((0,icons_1.setIcon)("off"),"stopped"!==op&&chrome.action.setBadgeText({text:""}))}),500)}function defaultsLoad(){chrome.storage.local.get((e=>{(!(e.serverJMX&&!(0,string_utils_1.stringIsEmpty)(e.serverJMX))||["http://bzm-con-web.elasticbeanstalk.com","http://converter.blazemeter.com"].includes(e.serverJMX))&&localSave({serverJMX:"https://converter.blazemeter.com"}),e&&e.options&&0===Object.keys(e.options).length&&(options.requests_to_record="top_level",options.record_ajax=!0,options.functional_test=!1,options.cookie=!1,options.record_css=!1,options.record_js=!1,options.record_images=!1,options.record_redirects=!1,options.record_other=!1,options.cache=!0,options.service_workers=!0,options.random_think_time=!0,options.update_settings=!1,options.regex_include="http://*/*, https://*/*",options.regex_follow_input="",options.useragent="Current Browser",localSave({options})),fetch(chrome.runtime.getURL("")+configFile).then((e=>e.json())).then((t=>{e.server||localSave({server:t.server_url}),e.ard_url||localSave({ard_url:t.ard_url}),(0,icons_1.initializeIcons)(),recordBlink()}))}))}chrome.storage.local.get(["mode","disable_followme"]).then((e=>{"TRUE"===e.disable_followme&&(mode="mode-record",localSave({mode})),mode=e.mode?e.mode:"mode-record"}));let progressbar=0;const gPendingCallbacks=[];function onBeforeSendHeaders(e){(0,forbidden_domains_1.checkForForbiddenDomain)(e.initiator,e.url).then((t=>{if(!t){if(!e.requestHeaders)return{requestHeaders:[]};if(useragent&&"Current Browser"!==useragent){const t=e.requestHeaders;return t.forEach((e=>{"user-agent"===e.name.toLowerCase()&&(e.value=useragent)})),{requestHeaders:t}}}}))}function onErrorOccurred(e){e.error&&(erroredRequestIds.push((0,background_utils_1.generateKey)(e)),googleAnalytics("send","exception",{exDescription:"onErrorOccurred():"+e.error,exFatal:!1}))}function onBeforeRequest(e){(0,forbidden_domains_1.checkForForbiddenDomain)(e.initiator,e.url).then((t=>{if(!t&&e.requestBody){let t="";if(e.requestBody.error)"Unknown error."!==e.requestBody.error&&googleAnalytics("send","exception",{exDescription:"onBeforeRequest():"+chrome.runtime.lastError.message,exFatal:!1});else if(e.requestBody.formData){t=e.requestBody.formData;for(const e of Object.keys(t))t[e]instanceof ArrayBuffer?t[e]=(new TextDecoder).decode(t[e]):t[e]=t[e].toString()}else{t=[],e.requestBody.raw&&e.requestBody.raw.forEach((function(e){if(e.bytes){let s="";const a=new Uint8Array(e.bytes),n=a.length;for(let e=0;e<n;e++)s+=String.fromCharCode(a[e]);t.push(s)}}));let s,a="";for(const e of t)a+=e;try{s=JSON.parse(a)}catch(e){}if(!s){const e=new URLSearchParams(a),s=new Set;e.forEach(((e,t)=>s.add(t)));const n={};for(const t of s){const s=e.getAll(t);let a;1===s.length?a=s[0]:s.length>1&&(a=s),n[t]=a}if(0!==Object.keys(n).length){let e=!1;for(const t of Object.keys(n))t===a&&null===n[t]&&(e=!0);e||(t=n)}}}let s=(0,background_utils_1.generateKey)(e);if(options.record_redirects){const t=Object.keys(traffic).map((e=>e.replace(/\D+/g,""))).filter((t=>t===e.requestId)).length;s+="r".repeat(t)}body[s]=t}}))}function clearCache(){if(!clearRunning){clearRunning=!0;const e=(new Date).getTime()-6048e5;chrome.browsingData.removeCache({since:e},(()=>{clearRunning=!1}))}}function clearServiceWorkers(){if(!clearServiceWorkersRunning){clearServiceWorkersRunning=!0;const e=(new Date).getTime()-6048e5;chrome.browsingData.removeServiceWorkers({since:e},(()=>{clearServiceWorkersRunning=!1}))}}function onSendHeaders(e){(0,forbidden_domains_1.checkForForbiddenDomain)(e.initiator,e.url).then((t=>{t||chrome.storage.local.get(null,(t=>{chrome.tabs.query({active:!0,currentWindow:!0}).then((s=>{if(s.length>0&&s[0].hasOwnProperty("id")&&(activeTabId=s[0].id),e.tabId===activeTabId&&(debug||!(0,url_utils_2.isFromRoot)("blazemeter.com",e.url))&&"mode-record"===mode){if(!options.record_redirects&&Object.keys(traffic).map((e=>e.replace(/\D+/g,""))).includes(e.requestId))return;if("xmlhttprequest"===e.type&&"top_level"===t.options.requests_to_record&&-1!==e.parentFrameId)return;if("https://fonts.googleapis.com/css?family=Open+Sans:400,600,700&blazemeter-chrome-extension=true"===e.url)return;for(const t of e.requestHeaders)if("Origin"===t.name&&t.value.startsWith("chrome-extension://"))return void(debug&&(console.log("Detected request from chrome extension"),console.log(e)));cache&&clearCache(),service_workers&&clearServiceWorkers();let s=(0,background_utils_1.generateKey)(e);if(options.record_redirects){const t=Object.keys(traffic).map((e=>e.replace(/\D+/g,"")));console.log(t);const a=t.filter((t=>t===e.requestId)).length;s+="r".repeat(a)}data={};let a="embedded",n="";if("main_frame"===e.type)a="top_level";else if("xmlhttprequest"===e.type){a="ajax";for(const t of e.requestHeaders)if("Origin"===t.name||"Referer"===t.name){const s=new URL(t.value).hostname;(0,url_utils_2.isFromRoot)(s,e.url)?(debug&&console.log("Detected "+e.url+" from same origin "+s),n=(0,url_utils_2.url_is_filepath)(e.url)?"embedded_resource":"top_level"):(n="embedded_external",debug&&console.log("Detected "+e.url+" from different origin "+s));break}}if(data.url=data.label=e.url,data.method=e.method,body[s]&&(data.body=body[s]),data.requestId=e.requestId,data.request_type=a,data.request_subtype=n,data.timestamp=Math.round(e.timeStamp),data.tabId=e.tabId,"mode-record"===mode&&t.options.edit_transaction_labels){let s=0;t.transactions.length>0&&(s=t.transactions.length-1);const r=t.transactions;if(t.options.autolabel_transactions||0===r.length){const i=r.length-1;let o;if(i>=0){let e=0;r.forEach((function(t){e+=t.counter})),o=counter-e,o>0&&(r[i].counter=o)}if(("top_level"===a||"ajax"===a&&"top_level"===n)&&o>0||0===t.transactions.length){const t={name:e.url,counter:0};r.push(t),localSave({transactions:r}),s=r.length-1}}data.transaction_key=s}data.headers=e.requestHeaders;for(const e in data.headers)if("Cookie"===data.headers[e].name){cookie?data.cookies=data.headers[e].value.split("; "):data.headers.splice(e,1);break}"mode-record"===mode&&(traffic[s]||(traffic[s]=data,counter++,chrome.runtime.sendMessage({counter}).catch((()=>{})),debug&&console.log("Captured:",traffic[s])))}}))}))}))}function processPendingCallbacks(e){let t={username:null,password:null};modalIsOpened=!0;let s=null;const a=window.prompt("This server requires authentication. Please enter username","");a&&(s=window.prompt("This server requires authentication. Please enter password","")),s&&(t={username:a,password:s}),modalIsOpened=!1;const n=(0,background_utils_1.generateKey)(e);data={url:e.url,label:e.url,method:e.method,requestId:e.requestId,timestamp:Math.round(e.timeStamp),headers:e.responseHeaders,authentication:t};for(const e in data.headers)if("Cookie"===data.headers[e].name){cookie?data.cookies=data.headers[e].value.split("; "):(data.headers.splice(e,1),console.log("Cookie deleted"));break}if(null!==t.username&&null!==t.password){const e={name:"Authorization",value:"Basic "+window.btoa(t.username+":"+t.password)},s=Object.keys(data.headers).sort().reverse()[0],a=Number(s)+1;data.headers[a]=e,gPendingCallbacks.pop()({authCredentials:t}),"mode-record"===mode&&(traffic[n]||(counter++,chrome.runtime.sendMessage({counter}).catch((()=>{}))),traffic[n]=data),debug&&console.log("Captured:",traffic[n])}}function getElementRegExp(e){return new RegExp(e.replace(/[-[\]{}()*+?/.,\\^$|#]/g,"\\$&").replace(/&.+;|\W+/g,"(&.+;|\\W)+"))}function handleAuthRequest(e,t){chrome.runtime.lastError?(console.log(chrome.runtime.lastError),googleAnalytics("send","exception",{exDescription:"handleAuthRequest():"+chrome.runtime.lastError.message,exFatal:!1})):"mode-record"===mode?(gPendingCallbacks.push(t),processPendingCallbacks(e)):t(void 0)}function convertTraffic(e){const t={},s=new Set(erroredRequestIds);return Object.keys(e).filter((e=>!s.has(e))).forEach((s=>{const a=e[s].method+" "+e[s].url.substring(0,130)+" ["+e[s].requestId+"]";delete e[s].requestId,delete e[s].tabId,void 0!==e[s].response&&delete e[s].response,t[a]=e[s]})),t}function stopRecording(){isRecording=!1,recEnd=new Date,chrome.webRequest.onBeforeRequest.removeListener(onBeforeRequest),chrome.webRequest.onSendHeaders.removeListener(onSendHeaders),chrome.webRequest.onAuthRequired.removeListener(handleAuthRequest),chrome.webRequest.onBeforeSendHeaders.removeListener(onBeforeSendHeaders),chrome.webRequest.onErrorOccurred.removeListener(onErrorOccurred),chrome.contextMenus.onClicked.removeListener(onAddJMXAssertion),traffic=convertTraffic(traffic),chrome.storage.local.set({isRecording})}function onAddJMXAssertion(e,t){if(counter>0){let s;switch(e.menuItemId){case"assertSelection":const a=getElementRegExp(e.selectionText);for(const e of Object.keys(traffic))if(t.id===traffic[e].tabId&&data.transaction_key===traffic[e].transaction_key){if(traffic[e].response){traffic[e].response.match(a)&&(s=e);continue}"top_level"===traffic[e].request_type&&(s=e)}s&&(traffic[s].assertions=traffic[s].assertions||[],traffic[s].assertions.push({type:"ResponseAssertion",scope:"parent",matchingRules:"contains",testField:"textResponse",testStrings:[String(a).slice(1).slice(0,-1)],ignoreStatus:!1,customMessage:e.selectionText}),(0,notifications_1.displayNotifications)(`Selection assert was successfully added to \n${e.pageUrl}`,!0,!1,!1,2e3));break;case"assertResponseCode":for(const a of Object.keys(traffic)){const n=t.id===traffic[a].tabId,r=data.transaction_key===traffic[a].transaction_key;if(n&&r){const t="top_level"===traffic[a].request_type,n=traffic[a].url===e.pageUrl,r=traffic[a].url.search(e.pageUrl)>=0,i=traffic[a].response&&traffic[a].response.search("<title>")>=0;(t&&n||r&&i)&&(s=a)}}s&&fetch(t.url).then((t=>{traffic[s].assertions=traffic[s].assertions||[],traffic[s].assertions.push({type:"ResponseAssertion",scope:"parent",matchingRules:"contains",testField:"responseCode",testStrings:[String(t.status)],ignoreStatus:!1}),(0,notifications_1.displayNotifications)(`Response code ${t.status} was successfully added to \n${e.pageUrl}`,!0,!1,!1,2e3)}))}}}function startRecording(){isRecording=!0,recStart=new Date,chrome.storage.local.get("options",(function(e){options=e.options;const t=options.record_ajax,s=options.record_css,a=options.record_js,n=options.record_images,r=options.record_other;if(cache=options.cache,service_workers=options.service_workers,cookie=options.cookie,body={},cache&&clearCache(),service_workers&&clearServiceWorkers(),(0,string_utils_1.stringIsEmpty)(options.regex_include))return chrome.runtime.sendMessage({op:"stop_recording",action:"filter_pattern_error",msg:"Incorrect Filter Pattern"}).catch((()=>{})),stopRecording(),void(op="stopped");e.options.useragent&&(useragent=e.options.useragent);let i=options.regex_include?options.regex_include.split(",").map((e=>e.trim())):["http://*/*","https://*/*"];for(const e of i)if(!(0,local_save_1.validateMatchPattern)(e))return chrome.runtime.sendMessage({op:"stop_recording",action:"filter_pattern_error",msg:"Incorrect Filter Pattern"}).catch((()=>{})),stopRecording(),void(op="stopped");const o={urls:i};"follow"===op||"top_level"===options.requests_to_record?(o.types=["main_frame"],!1===t&&"follow"!==op||o.types.push("xmlhttprequest")):(o.types=["main_frame","sub_frame","object"],!1!==t&&o.types.push("xmlhttprequest"),!1!==s&&(o.types.push("stylesheet"),o.types.push("font")),!1!==a&&o.types.push("script"),!1!==n&&o.types.push("image"),!1!==r&&(o.types.push("other"),o.types.push("ping"))),"record"===op&&chrome.storage.local.get("transactions",(function(e){0===e.transactions.length&&(localSave({transactions:[{name:"Test",counter:0}]}),console.log("Added default transaction"))})),chrome.webRequest.onErrorOccurred.addListener(onErrorOccurred,o),chrome.webRequest.onBeforeRequest.addListener(onBeforeRequest,o,["requestBody"]),chrome.webRequest.onSendHeaders.addListener(onSendHeaders,o,["requestHeaders"]),delete o.types,chrome.contextMenus.onClicked.addListener(onAddJMXAssertion)})),chrome.storage.local.set({isRecording})}function startTest(e){chrome.storage.local.get(["server","accountOptions"],(function(t){const s=`${t.server}/api/${version}/tests/${e}/start?${ApiClientIdentification()}`;fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:"{}"}).then((e=>e.json())).then((s=>{if(progressbar=101,!dismissed||"mode-follow"===mode){console.log("Starting test");const a=s.result.sessionsId&&s.result.sessionsId[0],n=s.result.id;localSave({testSessionId:s.result.id}),"stopped"!==op&&chrome.runtime.sendMessage({status:"You can now start testing!"}).catch((()=>{})),a?chrome.tabs.create({url:t.server+"/app/#/accounts/"+t.accountOptions.account+"/workspaces/"+t.accountOptions.workspace+"/projects/"+t.accountOptions.project+"/masters/"+n+"/summary"}):chrome.tabs.create({url:t.server+"/app/#/accounts/"+t.accountOptions.account+"/workspaces/"+t.accountOptions.workspace+"/projects/"+t.accountOptions.project+"/tests/"+e})}})).catch((t=>{console.log(t),op="stopped",(0,notifications_1.displayNotifications)("Failed to start the test. Error: "+t.statusText,!0,!0,!0),googleAnalytics("send",{hitType:"event",eventCategory:"Ajax Error "+t.status+" "+t.statusText,eventAction:"Start Test",eventLabel:"URL: "+s+" Test ID: "+e+uid}),chrome.runtime.sendMessage({waiting:"failed"}).catch((()=>{}))}))}))}function updateTest(e,t,s,a,n,r){chrome.storage.local.get(null,(n=>{let i={};if("mode-record"===s){const e=getTestType();if(t=geolocationByDefault,concurrency=concurrencyByDefault,isFunctionalTestFlag)i={isNewTest:!0,overrideExecutions:[{executor:"taurus",iterations:1,locations:[],locationsPercents:[]}],configuration:{canControlRampup:!1,type:e,scriptType:"taurus",targetThreads:0,filename:"blazemeter_functional_script.yaml",testMode:"http",plugins:{reportEmail:{enabled:!1}}}};else if(isSeleniumTestFlag)i={isNewTest:!0,executions:[{scenario:"default-scenario",steps:0}],overrideExecutions:[{locations:{[t]:1},locationsPercents:{[t]:100}}],configuration:{type:e,scriptType:"taurus",filename:a,testMode:"script",executionType:"taurusCloud",dedicatedIpsEnabled:!1,plugins:{reportEmail:{enabled:!1},jmeter:{version:"auto"},thresholds:{thresholds:[],ignoreRampup:!1,slidingWindow:!1},userExperience:{enabled:!1}}}};else if(isCombinedTestFlag){const s=(0,files_names_formats_1.getSeleniumScenarioName)();i={isNewTest:!0,executions:[{scenario:"default-scenario",steps:0}],overrideExecutions:[{locations:{[t]:concurrency},locationsPercents:{[t]:100}}],configuration:{type:e,scriptType:"taurus",filename:a,testMode:"script",executionType:"taurusCloud",dedicatedIpsEnabled:!1,plugins:{reportEmail:{enabled:!1},jmeter:{version:"auto"},thresholds:{thresholds:[],ignoreRampup:!1,slidingWindow:!1},userExperience:{enabled:!0,scenarios:[{filename:a,scenario:s}]}}}}}else i={isNewTest:!0,overrideExecutions:[{concurrency,executor:"jmeter",locations:{[t]:concurrency},locationsPercents:{[t]:100},rampUp:"1m",holdFor:"19m",steps:0}],configuration:{type:e,scriptType:"jmeter",filename:a,testMode:"script",plugins:{reportEmail:{enabled:!1},jmeter:{version:"auto"},userExperience:{enabled:!1}}}}}const o=`${n.server}/api/${version}/tests/${e}?${ApiClientIdentification()}`;return fetch(o,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((e=>e.json())).then((t=>{if(t.error)console.log("Failed to update the test."),(0,notifications_1.displayNotifications)("Failed to update the test.",!0,!0,!0),googleAnalytics("send",{hitType:"event",eventCategory:"Failed to update the test",eventAction:"Update Test",eventLabel:t.error.message+" Test ID:"+e+uid});else if("mode-record"===s&&isFunctionalTestFlag){const t=JSON.stringify({testId:recTestId,fileName:"blazemeter_functional_script.yaml",contentFormat:"yaml",content:r}),s=`${n.server}/api/${version}/tests/${e}/files/create?${ApiClientIdentification()}`;fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:t}).then((()=>{progressbar=101,startTestOrOpenEditTestPage(e)}))}else startTestOrOpenEditTestPage(e)})).catch((e=>{console.log(e);let t=e.statusText;e.status>0&&(t=e.status+" "+t),googleAnalytics("send",{hitType:"event",eventCategory:"Ajax Error "+e.status+" "+e.statusText,eventAction:"Update Test",eventLabel:"URL: "+o+" Test ID:"+uid}),chrome.runtime.sendMessage({status:t}).catch((()=>{}))})),null}))}function terminateTest(e){chrome.storage.local.get("server",(function(t){const s="Test Terminated: #"+e,a="Terminating Test #"+e;chrome.runtime.sendMessage({status:a}).catch((()=>{}));const n=`${t.server}/api/${version}/tests/${e}/terminate?${ApiClientIdentification()}`;fetch(n,{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{debug&&console.log(e),chrome.runtime.sendMessage({op:"testTerminated"}).catch((()=>{})),(0,notifications_1.displayNotifications)(s,!0,!0,!0)})).catch((t=>{console.log(t),googleAnalytics("send",{hitType:"event",eventCategory:"Ajax Error "+t.status+" "+t.statusText,eventAction:"Terminate Test",eventLabel:"URL: "+n+"Test ID:"+e+uid})}))}))}function progressBar(){progressbar++,progressbar<=100?(chrome.runtime.sendMessage({op:"progressbar",progress:progressbar}).catch((()=>{})),setTimeout((function(){progressBar()}),1200)):chrome.runtime.sendMessage({op:"progressbar",progress:0}).catch((()=>{}))}function startTestOrOpenEditTestPage(e){chrome.storage.local.get(null,(function(t){if("mode-follow"===t.mode)chrome.runtime.sendMessage({status:"Starting test."}).catch((()=>{})),startTest(e);else if(options.update_settings){const s=t.server+"/app/#accounts/"+t.accountOptions.account+"/workspaces/"+t.accountOptions.workspace+"/projects/"+t.accountOptions.project+"/tests/"+e+"/edit";dismissed||chrome.tabs.create({url:s})}else chrome.runtime.sendMessage({status:"Starting test."}).catch((()=>{})),startTest(e)}))}function deleteFileRequest(e,t){const s=JSON.stringify({fileName:e}),a=`${t}/api/${version}/tests/${recTestId}/delete-file?${ApiClientIdentification()}`;fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:s}).then((()=>console.log("Deleting File"))).catch((e=>console.error(e)))}function deleteFilesNewTaurusTest(e){return new Promise((t=>{let s=(0,files_names_formats_1.getNameSeleniumFile)();deleteFileRequest(s,e.server),s=(0,files_names_formats_1.getNameCombinedJmeterSeleniumFile)(),deleteFileRequest(s,e.server),s=(0,files_names_formats_1.getNameJmeterFile)(),deleteFileRequest(s,e.server),t()}))}function makeBlobFromYaml(e,t){const s=isSeleniumTestFlag?"files[]":"file",a=new Blob([e],{type:isSeleniumTestFlag?"application/octet-stream":"text/x-yaml"});uploadingData=!1;const n=new FormData;return n.append(s,a,t),n}function sendFilePostRequest(e,t,s,a){const n=`${e.server}/api/${version}/tests/${recTestId}/files?${ApiClientIdentification()}`;fetch(n,{method:"POST",body:s}).then((e=>e.json())).then((s=>{s.result.id&&((0,notifications_1.displayNotifications)("Data uploaded successfully.",!0,!0,!0),makeValidationsRequest(e.server,a).then((()=>t())),progressbar=101)})).catch((()=>{setTimeout((function(){(0,notifications_1.displayNotifications)("Upload data failed.",!0,!1,!0)}),2500),chrome.runtime.sendMessage({op:"uploadJMXFailed"}).catch((()=>{})),googleAnalytics("send",{hitType:"event",eventCategory:"Upload data failed",eventAction:"Upload test",eventLabel:"Upload jmx data failed."})}))}function getFileFromConverterAndSend(e,t,s,a){fetch(t).then((t=>{200===t.status&&t.blob().then((t=>{uploadingData=!1;const n=new FormData;n.append("file",t,a),sendFilePostRequest(e,s,n,a)}))}))}function makeValidationsRequest(e,t){return new Promise((s=>{const a=JSON.stringify({files:[{fileName:t}]}),n=`${e}/api/${version}/tests/${recTestId}/validate?${ApiClientIdentification()}`;fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:a}).then((e=>e.json())).then((()=>{let t=0;const a=setInterval((()=>{const n=`${e}/api/${version}/tests/${recTestId}/validations?${ApiClientIdentification()}`;fetch(n).then((e=>e.json())).then((e=>{(e.result[0].status>=100||t>21)&&(clearInterval(a),s()),t++}))}),2e3)}))}))}function uploadRecordData(e,t,s,a){return new Promise((n=>{progressbar=0,exportJMX=!1,progressBar(),chrome.storage.local.get(["server","jmxname","accountOptions"],(function(r){if(isFunctionalTestFlag)a&&deleteFilesNewTaurusTest(r).then((function(){n()})),n();else if(a)deleteFilesNewTaurusTest(r).then((function(){if(s){const e=makeBlobFromYaml(s,t);sendFilePostRequest(r,n,e,t)}else getFileFromConverterAndSend(r,e,n,t)}));else if(s){const e=makeBlobFromYaml(s,t);sendFilePostRequest(r,n,e,t)}else getFileFromConverterAndSend(r,e,n,t)}))}))}function throwConversionError(e){exportJMX&&(exportJMX=!1,clearInterval(refreshIntervalId),chrome.runtime.sendMessage({op:"closeOverlay"}).catch((()=>{}))),chrome.runtime.sendMessage({status:e}).catch((()=>{}))}function checkConvertStatus(e,t){const s=`${e}/api/converter/v1/${t}/status`;fetch(s).then((e=>e.json())).then((s=>{if((0,string_utils_1.stringIsEmpty)(s.error)){const a=s.data.oUrl;if(a.length<1&&exportJMX)setTimeout((function(){checkConvertStatus(e,t)}),3e3);else if(uploadingData){const e=[];for(const t of Object.keys(UploadTraffic))e.push(UploadTraffic[t]);chrome.storage.local.get(null,(function(e){chrome.storage.local.get("mode",(function(e){uploadData(a,void 0)}))}))}else exportJMX=!1,(0,notifications_1.displayNotifications)("Successfully exported to JMX file.",!0,!1,!1),clearInterval(refreshIntervalId),chrome.runtime.sendMessage({op:"exported_to_jmx",jmxHref:a}).catch((()=>{}))}else throwConversionError(s.error)})).catch((e=>{throwConversionError("Export to JMX failed."),(0,notifications_1.displayNotifications)("Export to JMX failed.",!0,!1,!1),googleAnalytics("send",{hitType:"event",eventCategory:"Ajax Error "+e.status+" "+e.statusText,eventAction:"Export JMX",eventLabel:"URL: "+s+" Token: "+t+uid})}))}function runConverter(e,t){uploadingData||(progressbar=2,refreshIntervalId=setInterval((function(){progressbar<100?(chrome.runtime.sendMessage({op:"exportJMX",exporting:exportJMX,progress:progressbar}).catch((()=>{})),progressbar++):progressbar=1,exportJMX||(clearInterval(refreshIntervalId),chrome.runtime.sendMessage({op:"closeOverlay"}).catch((()=>{})))}),300));const s=`${e}/api/converter/v1/${t}/convert`;fetch(s,{method:"POST"}).then((e=>e.json())).then((s=>{(0,string_utils_1.stringIsEmpty)(s.error)?"conversion_started"===s.data.status&&(exportJMX&&s.error.length<1?checkConvertStatus(e,t):(exportJMX=!1,!1===s.valid&&chrome.runtime.sendMessage({status:s.error,link:s.data.lUrl}).catch((()=>{})))):throwConversionError(s.error)})).catch((e=>{console.log(e),throwConversionError("Export to JMX failed."),(0,notifications_1.displayNotifications)("Export to JMX failed.",!0,!1,!1),googleAnalytics("send",{hitType:"event",eventCategory:"Ajax Error "+e.status+" "+e.statusText,eventAction:"Export JMX",eventLabel:"URL: "+s+" Token: "+t+uid})}))}function exportJmeter(e){const t=[];for(const s of Object.keys(e))t.push(e[s]);chrome.storage.local.get(null,(function(e){chrome.storage.local.get("mode",(function(s){let a=jsonOptions(e,s.mode);a.traffic=t,a=JSON.stringify(a),debug&&(console.log("Uploading json to server: "),console.log(a));const n=new Blob([a],{type:"text/json"}),r=new FormData,i=(0,files_names_formats_1.convertToSlug)((0,files_names_formats_1.removeIdFromString)(e.jmxname));r.append("file",n,i+".json"),exportJMX=!0;const o=`${e.serverJMX}/api/converter/v1/upload`;fetch(o,{method:"POST",body:r}).then((e=>e.json())).then((t=>{(0,string_utils_1.stringIsEmpty)(t.error)?runConverter(e.serverJMX,t.publicToken):throwConversionError(t.error)})).catch((e=>{throwConversionError("Export to JMX failed."),(0,notifications_1.displayNotifications)("Export to JMX failed.",!0,!1,!1),googleAnalytics("send",{hitType:"event",eventCategory:"Ajax Error "+e.status+" "+e.statusText,eventAction:"Export JMX",eventLabel:"URL: "+o+uid})}))}))}))}function jsonOptions(e,t){const s={};options=e.options,s.top_level="top_level"===options.requests_to_record,s.pace_interval_delay=0,s.parallel_downloads=String(e.parallel_downloads),s.extension_version=manifest.version,s.cookie=options.cookie;const a=[];return e.transactions.forEach((function(e){a.push(e.name)})),s.transaction_labels=a,"mode-record"===t?(s.name=e.record_name,s.regex_include=options.regex_include):(s.name=e.test_name,s.regex_include=options.regex_follow_input),s.projectId=e.accountOptions.project,console.log("json",s),s}function getTestType(){let e="taurus";return isFunctionalTestFlag?e="functionalApi":isSeleniumTestFlag?e="functionalGui":isBrowserPerformanceTestFlag&&(e="performanceGui"),e}function uploadData(e,t){if(recTestId=null,retries-=1,retries<1)return retries=5,chrome.runtime.sendMessage({op:"uploadDataFailed"}).catch((()=>{})),(0,notifications_1.displayNotifications)("Sending data failed. Please try again.",!0,!1,!1),void googleAnalytics("send",{hitType:"event",eventCategory:"Upload data failed",eventAction:"Export JMX",eventLabel:"Sending data failed after 5 retries."});chrome.storage.local.get(null,(function(s){const a=geolocationByDefault;let n,r=(0,files_names_formats_1.removeIdFromString)(s.jmxname);if(t&&isCombinedTestFlag?(r=(0,files_names_formats_1.getNameCombinedJmeterSeleniumFile)(),n=(0,files_names_formats_1.getNameCombinedJmeterSeleniumTest)(s.record_name)):t&&isSeleniumTestFlag?(r=(0,files_names_formats_1.getNameSeleniumFile)(),n=(0,files_names_formats_1.getNameSeleniumTest)(s.record_name)):t&&isBrowserPerformanceTestFlag?(r=(0,files_names_formats_1.getNamePerformanceGuiFile)(),n=(0,files_names_formats_1.getNamePerformanceGuiTest)(s.record_name)):(r=(0,files_names_formats_1.getNameJmeterFile)(),n=(0,files_names_formats_1.getNameJmeterTest)(s.record_name),isFunctionalTestFlag&&(n=(0,files_names_formats_1.getNameFunctionalTest)(s.record_name))),concurrency=concurrencyByDefault,null!=s.record_id)recTestId=s.record_id,uploadRecordData(e,r,t,!0).then((function(){updateTest(s.record_id,a,s.mode,r,e,t)}));else if(isSeleniumTestFlag||isBrowserPerformanceTestFlag){let a,r,i,o,c,l,d;s.scriptless?(a=s.scriptless.server,r=s.scriptless.accountId,i=s.scriptless.workspaceId,o=s.scriptless.projectId,c=s.scriptless.testId,l=s.scriptless.sourceTabId):(a=s.ard_url+"/api/v1",r=s.accountOptions.account,i=s.accountOptions.workspace,o=s.accountOptions.project,d=s?.test_type??null);const u=new ard_1.Ard(a),p={accountId:r,workspaceId:i,projectId:o,testId:c,content:t,testName:n,...isBrowserPerformanceTestFlag?{testType:d}:{}};u.createTest(p).then((async e=>{retries=5,await chrome.storage.local.set({scriptless:null}),l?await chrome.tabs.sendMessage(l,{type:"refresh",workspaceId:i,testId:c}).catch((()=>{})):await chrome.tabs.create({url:e})})).catch((()=>uploadData(e,t)))}else{const i=getTestType();let o={};const c={isNewTest:!0,name:n,projectId:Number(s.accountOptions.project)};if(isFunctionalTestFlag)o={...c,overrideExecutions:[{executor:"taurus",iterations:1,locations:[],locationsPercents:[]}],configuration:{canControlRampup:!1,type:i,scriptType:"taurus",targetThreads:0,filename:"blazemeter_functional_script.yaml",testMode:"http",plugins:{reportEmail:{enabled:!1}}}};else if(isCombinedTestFlag){const e=(0,files_names_formats_1.getSeleniumScenarioName)();o={...c,executions:[{scenario:"default-scenario",steps:0}],overrideExecutions:[{locations:{[a]:concurrency},locationsPercents:{[a]:100}}],configuration:{type:i,scriptType:"taurus",filename:r,testMode:"script",executionType:"taurusCloud",dedicatedIpsEnabled:!1,plugins:{reportEmail:{enabled:!1},jmeter:{version:"auto"},thresholds:{thresholds:[],ignoreRampup:!1,slidingWindow:!1},userExperience:{enabled:!0,scenarios:[{filename:r,scenario:e}]}}}}}else o={...c,overrideExecutions:[{concurrency,executor:"jmeter",locations:{[a]:concurrency},locationsPercents:{[a]:100},rampUp:"1m",holdFor:"19m",steps:0}],configuration:{type:i,scriptType:"jmeter",filename:r,testMode:"script",plugins:{reportEmail:{enabled:!1},jmeter:{version:"auto"}}}};o=JSON.stringify(o);const l=`${s.server}/api/${version}/tests?${ApiClientIdentification()}`;fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:o}).then((e=>e.json())).then((a=>{retries=5,recTestId=a.result.id,(0,notifications_1.displayNotifications)("Test #"+recTestId+" created.",!0,!1,!1),a.result.id,a.result.name,a.result.configuration.concurrency,a.result.configuration.location,s.options.useragent,s.options.requests_to_record,s.options.cache,s.options.service_workers,s.options.cookie,s.options.record_css,s.options.record_js,s.options.record_images,s.options.record_ajax,s.options.record_redirects,s.options.record_other,s.options.update_settings,uploadRecordData(e,r,t,!1).then((function(){if(isFunctionalTestFlag){const e=JSON.stringify({testId:recTestId,fileName:"blazemeter_functional_script.yaml",contentFormat:"yaml",content:t}),a=`${s.server}/api/${version}/tests/${recTestId}/files/create?${ApiClientIdentification()}`;fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:e}).then((()=>{progressbar=101,startTestOrOpenEditTestPage(recTestId)}))}else startTestOrOpenEditTestPage(recTestId)}))})).catch((()=>uploadData(e,t)))}}))}function calculateDuration(e){recStart=null,recEnd=null}chrome.storage.local.get("debug").then((e=>{!0===e.debug&&(console.log("Debug mode"),debug=!0)})),setTimeout((()=>{localSave({permissionsBlockFirstTimeShow:!0})}),1e3),chrome.runtime.onInstalled.addListener((e=>{if("install"===e.reason)chrome.storage.sync.clear(),chrome.storage.local.clear(),defaultsLoad();else if("update"===e.reason){const e="https://guide.blazemeter.com/hc/en-us/articles/115004970329-Chrome-Extension-Changelog-Chrome-Extension-Changelog";chrome.tabs.create({url:e})}})),defaultsLoad(),chrome.runtime.onMessage.addListener((function(request,sender,callback){if("executeScript"===request.type)chrome.scripting.executeScript({target:{tabId:sender.tab.id},func:e=>{const t=document.createElement("script");t.textContent=e,document.documentElement.appendChild(t),t.remove()},args:[request.payload],world:"MAIN"}).then((()=>callback()));else{if("evaluateScript"===request.type)return chrome.scripting.executeScript({target:{tabId:sender.tab.id},func:code=>eval(code),args:[request.payload],world:"MAIN"},(e=>{callback(e[0].result)})),!0;if("has_current_suite"===request.type)callback(!!(0,background_ui_1.getRecorder)({}).currentSuite);else if("set_default_test_name"===request.type)(0,background_ui_1.getRecorder)({}).defaultTestName=request.payload;else if("pause_traffic"===request.type){if(modalIsOpened)return;stopRecording(),op="pause",(0,icons_1.setIcon)("off"),(0,notifications_1.displayNotifications)("BlazeMeter: paused recording traffic",!1,!0,!1),callback(!0)}else if("stop_traffic"===request.type){if(modalIsOpened)return;stopRecording(),op="stopped",(0,notifications_1.displayNotifications)("Stopped recording traffic",!1,!0,!1);const e={start:recStart,end:recEnd};calculateDuration(JSON.stringify(e)),callback(!0)}else if("reset_traffic"===request.type)traffic={},counter=0,op="stopped",localSave({transactions:[]}),chrome.storage.local.set({position:{}}).catch((e=>console.log(e))),(0,notifications_1.displayNotifications)("BlazeMeter: traffic reset",!1,!0,!1),callback(!0);else if("start_traffic"===request.type)"stopped"===op&&(traffic={},counter=0,localSave({transactions:[]}),chrome.storage.local.set({position:{}}).catch((e=>console.log(e))),(0,notifications_1.displayNotifications)("BlazeMeter: traffic restarted",!1,!0,!1)),op="record",startRecording(),(0,notifications_1.displayNotifications)("Started recording traffic",!1,!0,!1),callback(!0);else if("dismiss_test"===request.type)dismissed=!0,progressbar=101,(0,notifications_1.displayNotifications)("FollowMe test stopped!",!1,!0,!0),chrome.storage.local.get(["mode","test_id"]).then((e=>{"mode-follow"===e.mode&&(op="stopped",chrome.runtime.sendMessage({op:"progressbar",progress:0,followstopped:!0}).then((e=>console.log(e))).catch((()=>{})))})),callback(!0);else if("get_traffic"===request.type)data=JSON.stringify(traffic),callback(data);else{if("get_json"===request.type)return chrome.storage.local.get(null,(e=>{chrome.storage.local.get(null,(t=>{let s=jsonOptions(e,t.mode);s.traffic=[...Object.values(traffic)],s=JSON.stringify(s),callback(s)}))})),!0;if("get_status"===request.type)callback({op});else if("get_logged"===request.type)callback({logged:isLogged});else if("upload_traffic"===request.type){isCombinedTestFlag=!1,isSeleniumTestFlag=!1,isFunctionalTestFlag=!1,isBrowserPerformanceTestFlag=!1;const e=request.testType;if("selenium"===e||"performanceGui"===e){isSeleniumTestFlag="selenium"===e,isBrowserPerformanceTestFlag="performanceGui"===e;const t=(0,background_ui_1.getRecorder)({});localSave({test_type:e}),chrome.storage.local.get(null,(function(e){(0,generate_yaml_1.getSuiteYAML)(t.currentSuite,!0).then((e=>{uploadData(null,e)}))}))}else if("combinedJmeterAndSelenium"===e)isCombinedTestFlag=!0,(0,generate_yaml_1.getCombinedYaml)(traffic).then((function(e){uploadData(null,e)}));else if("functionalApi"===e)isFunctionalTestFlag=!0,(0,generate_yaml_1.getYamlJmeterFunctionalTest)().then((function(e){uploadData(null,e)}));else{dismissed=!1;let e=!0;UploadTraffic=traffic,chrome.storage.local.get(null,(t=>{chrome.storage.local.get(null,(s=>{options=t.options;const a=s.selected_domains;if(Object.keys(a).length>0){UploadTraffic={};for(const e of Object.keys(traffic)){const t=(0,url_utils_1.parseURL)(traffic[e].url);a.hasOwnProperty(t)&&(UploadTraffic[e]=traffic[e])}chrome.storage.local.set({selected_domains:{}}).then((e=>console.log(e)))}else if((0,string_utils_1.stringIsEmpty)(options.regex_include)||"http://*/*, https://*/*"===options.regex_include){const t=(0,url_utils_2.getTrafficUrls)(mode,traffic);Object.keys(t).length>1&&(e=!1,chrome.runtime.sendMessage({op:"domainoverlay",domains:JSON.stringify(t),action:"upload"}).then((e=>console.log(e))).catch((()=>{})))}e&&(uploadingData=!0,exportJmeter(UploadTraffic))}))}))}callback(!0)}else if("export_jmeter"===request.type){uploadingData=!1;let e=!0;UploadTraffic=traffic,chrome.storage.local.get(null,(t=>{chrome.storage.local.get(null,(s=>{options=t.options;const a=s.selected_domains;if(Object.keys(a).length>0){UploadTraffic={};for(const e of Object.keys(traffic)){const t=(0,url_utils_1.parseURL)(traffic[e].url);a.hasOwnProperty(t)&&(UploadTraffic[e]=traffic[e])}chrome.storage.local.set({selected_domains:{}})}else if((0,string_utils_1.stringIsEmpty)(options.regex_include)||"http://*/*, https://*/*"===options.regex_include){const t=(0,url_utils_2.getTrafficUrls)(mode,traffic);Object.keys(t).length>1&&(e=!1,chrome.runtime.sendMessage({op:"domainoverlay",domains:JSON.stringify(t),action:"export"}).then((e=>console.log(e))).catch((()=>{})))}if(options.random_think_time){let e=0,t=0;for(const s of Object.keys(UploadTraffic))("top_level"===UploadTraffic[s].request_type||"top_level"===UploadTraffic[s].request_subtype)&&(0===e||(t=UploadTraffic[s].timestamp-e),e=UploadTraffic[s].timestamp,UploadTraffic[s].timers=[{type:"UniformRandom",delayOffset:String(.5*t),delayMaximum:String(t),comments:`Recorded time was ${t} milliseconds`}])}e&&exportJmeter(UploadTraffic)}))})),callback(!0)}else if("traffic_exists"===request.type)"{}"!==JSON.stringify(traffic)?callback(!0):callback(!1);else if("traffic_exists_follow"===request.type)callback(!1);else if("change_useragent"===request.type)useragent="Current Browser"!==request.action&&request.action?request.action:null;else if("change_regex_follow_input"===request.type)chrome.storage.local.get("options").then((e=>{e.options.regex_follow_input?options.regex_follow_input=e.options.regex_follow_input:options.regex_follow_input=""}));else if("switch_mode"===request.type)chrome.storage.local.get("mode").then((e=>{e.mode&&(mode=e.mode)}));else if("close_overlay"===request.type)exportJMX&&(exportJMX=!1,chrome.runtime.sendMessage({status:"Exporting to JMX canceled."}).catch((()=>{})));else if("cancel_test"===request.type)recTestId&&"mode-follow"!==mode&&terminateTest(recTestId),dismissed=!0,progressbar=101,recTestId=null,callback(!0);else if("getSuiteYAMLSeleniumFile"===request.type){const{s_suite:e,extended:t}=request,s=(0,generate_yaml_1.getSuiteYAML)(e,t),a=(0,files_names_formats_1.getNameSeleniumFile)();callback({suiteYAML:s,fileName:a})}else if("getNameSeleniumFile"===request.type){const{language:e,fileFormat:t}=request,s=(0,files_names_formats_1.getNameSeleniumFile)(t,e);callback(s)}else if("stop_blinking"===request.type)state_1.globalState.functionalIconBlinkMode=!1;else if("start_blinking"===request.type)state_1.globalState.functionalIconBlinkMode=!0;else{if("getYamlJmeter"===request.type)return traffic=JSON.parse(request.json),(0,generate_yaml_1.getYamlJmeter)(traffic).then((e=>{console.log({traffic,x:e}),callback(e)})),!0;if("getCombinedYamlFile"===request.type)return(0,generate_yaml_1.getCombinedYaml)(traffic).then((e=>{console.log("Combined Yaml file",e);const t=(0,files_names_formats_1.getNameCombinedJmeterSeleniumFile)();callback({fileName:t,combinedYaml:e})})),!0}}}chrome.storage.local.set({op})})),chrome.runtime.onMessage.addListener((function(e,t,s){if("json"===e.op)traffic=JSON.parse(e.json),s({success:!0});else if("sendResponseAjaxWithBody"===e.command){let t;for(const s of Object.keys(traffic))traffic[s].url===e.message.responseUrl&&(t=s);void 0!==traffic[t]&&e.message.body&&(traffic[t].response=e.message.body)}else if("setContextElement"===e.command);else if("reloadoptions"===e.op)chrome.storage.local.get(null,(e=>{e.debug?(console.log("Debug mode"),debug=!0):debug=!1})),chrome.storage.local.get(null,(e=>{e.logged?(isLogged=!0,uid=" User ID: "+e.uid):(isLogged=!1,uid="")}));else if("themeChanged"===e.op)(0,icons_1.initializeIcons)();else if("takeScreenshot"===e.op)chrome.tabs.captureVisibleTab(void 0,{format:"png"}).then((t=>{const{left:s,top:a,width:n,height:r}=e.cropRect,i=e.recordId;cropImage(t,s,a,n,r).then((e=>{(0,background_ui_1.getRecorder)({}).currentSuite.addScreenshot(i,e)}))}));else if("scriptless/start-recording"===e.type){if("record"===op||"pause"===op)return chrome.tabs.sendMessage(t.tab.id,{type:"scriptless/start-recording-failed"}).catch((()=>{})),void s(!1);const a=(0,name_utils_1.generateRecordingName)();chrome.storage.local.set({record_name:a,jmxname:a,scriptless:{...e,sourceTabId:t.tab.id,type:void 0}}).then((()=>{const e=chrome.runtime.getURL("dist/start-recording.html");chrome.windows.create({url:e},(t=>{const s={...t.tabs[0]};s.url=e,"stopped"===op&&(traffic={},counter=0,localSave({transactions:[]}),chrome.storage.local.set({position:{}}).then((e=>console.log(e))),(0,notifications_1.displayNotifications)("BlazeMeter: traffic restarted",!1,!0,!1)),op="record",startRecording(),(0,notifications_1.displayNotifications)("Started recording traffic",!1,!0,!1);const n=(0,background_ui_1.getRecorder)({});n.defaultTestName=a,n.updateSuiteName(a),n.startRecording("RECORD",s)})),s(!0)}))}else"stop_recording"===e.command&&(chrome.storage.local.get("scriptless").then((e=>{const t=!!e.scriptless,s=(0,background_ui_1.getRecorder)({});if(s.endRecording(t),state_1.globalState.functionalIconBlinkMode=!0,t){chrome.tabs.sendMessage(e.scriptless.sourceTabId,{type:"stopped_recording",workspaceId:e.scriptless.workspaceId,testId:e.scriptless.testId}).catch((()=>{})),isSeleniumTestFlag=!0;const t=!0;(0,generate_yaml_1.getSuiteYAML)(s.currentSuite,t).then((e=>{console.log("Got yaml"),uploadData(null,e)}))}})),s({status:"ok",error:!1}))}));const toDataURL=async e=>new Promise((t=>{const s=new FileReader;s.addEventListener("load",(()=>t(s.result))),s.readAsDataURL(e)}));async function cropImage(e,t,s,a,n){const r=new OffscreenCanvas(a,n),i=await(await fetch(e)).blob(),o=await createImageBitmap(i);return r.getContext("2d").drawImage(o,t,s,a,n,0,0,a,n),await toDataURL(await r.convertToBlob())}function getTraffic(){return traffic}chrome.tabs.onUpdated.addListener((function(e,t,s){"complete"===t.status&&s.active&&(chrome.tabs.sendMessage(e,{msg:"page_loaded"}).catch((()=>{})),keepAliveMechanism()),activeTabId===e&&"record"===op&&t.title&&chrome.storage.local.get(["options","transactions"]).then((e=>{if(e.options.autolabel_transactions){const t=e.transactions,a=t.length-1;a>=0&&t[a].name.startsWith("http")&&(t[a].name=s.title,localSave({transactions:t}))}}))})),chrome.tabs.onCreated.addListener((e=>{activeTabId=e.id,erroredRequestIds=[]})),chrome.tabs.onDetached.addListener((e=>{erroredRequestIds=[]})),chrome.tabs.onRemoved.addListener((e=>{erroredRequestIds=[]}));const GLOBAL={};GLOBAL.localSave=localSave,GLOBAL.configFile=configFile,GLOBAL.googleAnalytics=googleAnalytics,GLOBAL.ApiClientIdentification=ApiClientIdentification,GLOBAL.debug=debug,GLOBAL.traffic=traffic,GLOBAL.getTraffic=getTraffic;const keepAliveMechanism=()=>{intervalId&&clearInterval(intervalId),chrome.tabs.sendMessage(activeTabId,{msg:"keep-alive"}).catch((()=>{})),intervalId=setInterval((()=>chrome.tabs.sendMessage(activeTabId,{msg:"keep-alive"}).catch((()=>{}))),25e3)}},4781:(e,t,s)=>{"use strict";var a=s(8433),n=s(1231),r=s(5489),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,c=65279,l={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},d=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],u=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function p(e){var t,s,r;if(t=e.toString(16).toUpperCase(),e<=255)s="x",r=2;else if(e<=65535)s="u",r=4;else{if(!(e<=4294967295))throw new n("code point within a string may not be greater than 0xFFFFFFFF");s="U",r=8}return"\\"+s+a.repeat("0",r-t.length)+t}function m(e){this.schema=e.schema||r,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=a.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var s,a,n,r,i,c,l;if(null===t)return{};for(s={},n=0,r=(a=Object.keys(t)).length;n<r;n+=1)i=a[n],c=String(t[i]),"!!"===i.slice(0,2)&&(i="tag:yaml.org,2002:"+i.slice(2)),(l=e.compiledTypeMap.fallback[i])&&o.call(l.styleAliases,c)&&(c=l.styleAliases[c]),s[i]=c;return s}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function h(e,t){for(var s,n=a.repeat(" ",t),r=0,i=-1,o="",c=e.length;r<c;)-1===(i=e.indexOf("\n",r))?(s=e.slice(r),r=c):(s=e.slice(r,i+1),r=i+1),s.length&&"\n"!==s&&(o+=n),o+=s;return o}function f(e,t){return"\n"+a.repeat(" ",e.indent*t)}function g(e){return 32===e||9===e}function b(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==c||65536<=e&&e<=1114111}function y(e){return b(e)&&e!==c&&13!==e&&10!==e}function v(e,t,s){var a=y(e),n=a&&!g(e);return(s?a:a&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!n)||y(t)&&!g(t)&&35===e||58===t&&n}function w(e,t){var s,a=e.charCodeAt(t);return a>=55296&&a<=56319&&t+1<e.length&&(s=e.charCodeAt(t+1))>=56320&&s<=57343?1024*(a-55296)+s-56320+65536:a}function _(e){return/^\n* /.test(e)}function x(e,t,s,a,r){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==d.indexOf(t)||u.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,s),o=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),m=a||e.flowLevel>-1&&s>=e.flowLevel;switch(function(e,t,s,a,n,r,i,o){var l,d,u=0,p=null,m=!1,h=!1,f=-1!==a,y=-1,x=b(d=w(e,0))&&d!==c&&!g(d)&&45!==d&&63!==d&&58!==d&&44!==d&&91!==d&&93!==d&&123!==d&&125!==d&&35!==d&&38!==d&&42!==d&&33!==d&&124!==d&&61!==d&&62!==d&&39!==d&&34!==d&&37!==d&&64!==d&&96!==d&&function(e){return!g(e)&&58!==e}(w(e,e.length-1));if(t||i)for(l=0;l<e.length;u>=65536?l+=2:l++){if(!b(u=w(e,l)))return 5;x=x&&v(u,p,o),p=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(10===(u=w(e,l)))m=!0,f&&(h=h||l-y-1>a&&" "!==e[y+1],y=l);else if(!b(u))return 5;x=x&&v(u,p,o),p=u}h=h||f&&l-y-1>a&&" "!==e[y+1]}return m||h?s>9&&_(e)?5:i?2===r?5:2:h?4:3:!x||i||n(e)?2===r?5:2:1}(t,m,e.indent,o,(function(t){return function(e,t){var s,a;for(s=0,a=e.implicitTypes.length;s<a;s+=1)if(e.implicitTypes[s].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!a,r)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+T(t,e.indent)+I(h(t,i));case 4:return">"+T(t,e.indent)+I(h(function(e,t){for(var s,a,n,r=/(\n+)([^\n]*)/g,i=(n=-1!==(n=e.indexOf("\n"))?n:e.length,r.lastIndex=n,k(e.slice(0,n),t)),o="\n"===e[0]||" "===e[0];a=r.exec(e);){var c=a[1],l=a[2];s=" "===l[0],i+=c+(o||s||""===l?"":"\n")+k(l,t),o=s}return i}(t,o),i));case 5:return'"'+function(e){for(var t,s="",a=0,n=0;n<e.length;a>=65536?n+=2:n++)a=w(e,n),!(t=l[a])&&b(a)?(s+=e[n],a>=65536&&(s+=e[n+1])):s+=t||p(a);return s}(t)+'"';default:throw new n("impossible error: invalid scalar style")}}()}function T(e,t){var s=_(e)?String(t):"",a="\n"===e[e.length-1];return s+(!a||"\n"!==e[e.length-2]&&"\n"!==e?a?"":"-":"+")+"\n"}function I(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function k(e,t){if(""===e||" "===e[0])return e;for(var s,a,n=/ [^ ]/g,r=0,i=0,o=0,c="";s=n.exec(e);)(o=s.index)-r>t&&(a=i>r?i:o,c+="\n"+e.slice(r,a),r=a+1),i=o;return c+="\n",e.length-r>t&&i>r?c+=e.slice(r,i)+"\n"+e.slice(i+1):c+=e.slice(r),c.slice(1)}function S(e,t,s,a){var n,r,i,o="",c=e.tag;for(n=0,r=s.length;n<r;n+=1)i=s[n],e.replacer&&(i=e.replacer.call(s,String(n),i)),(O(e,t+1,i,!0,!0,!1,!0)||void 0===i&&O(e,t+1,null,!0,!0,!1,!0))&&(a&&""===o||(o+=f(e,t)),e.dump&&10===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=c,e.dump=o||"[]"}function C(e,t,s){var a,r,c,l,d,u;for(c=0,l=(r=s?e.explicitTypes:e.implicitTypes).length;c<l;c+=1)if(((d=r[c]).instanceOf||d.predicate)&&(!d.instanceOf||"object"==typeof t&&t instanceof d.instanceOf)&&(!d.predicate||d.predicate(t))){if(s?d.multi&&d.representName?e.tag=d.representName(t):e.tag=d.tag:e.tag="?",d.represent){if(u=e.styleMap[d.tag]||d.defaultStyle,"[object Function]"===i.call(d.represent))a=d.represent(t,u);else{if(!o.call(d.represent,u))throw new n("!<"+d.tag+'> tag resolver accepts not "'+u+'" style');a=d.represent[u](t,u)}e.dump=a}return!0}return!1}function O(e,t,s,a,r,o,c){e.tag=null,e.dump=s,C(e,s,!1)||C(e,s,!0);var l,d=i.call(e.dump),u=a;a&&(a=e.flowLevel<0||e.flowLevel>t);var p,m,h="[object Object]"===d||"[object Array]"===d;if(h&&(m=-1!==(p=e.duplicates.indexOf(s))),(null!==e.tag&&"?"!==e.tag||m||2!==e.indent&&t>0)&&(r=!1),m&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(h&&m&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),"[object Object]"===d)a&&0!==Object.keys(e.dump).length?(function(e,t,s,a){var r,i,o,c,l,d,u="",p=e.tag,m=Object.keys(s);if(!0===e.sortKeys)m.sort();else if("function"==typeof e.sortKeys)m.sort(e.sortKeys);else if(e.sortKeys)throw new n("sortKeys must be a boolean or a function");for(r=0,i=m.length;r<i;r+=1)d="",a&&""===u||(d+=f(e,t)),c=s[o=m[r]],e.replacer&&(c=e.replacer.call(s,o,c)),O(e,t+1,o,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,l&&(d+=f(e,t)),O(e,t+1,c,!0,l)&&(e.dump&&10===e.dump.charCodeAt(0)?d+=":":d+=": ",u+=d+=e.dump));e.tag=p,e.dump=u||"{}"}(e,t,e.dump,r),m&&(e.dump="&ref_"+p+e.dump)):(function(e,t,s){var a,n,r,i,o,c="",l=e.tag,d=Object.keys(s);for(a=0,n=d.length;a<n;a+=1)o="",""!==c&&(o+=", "),e.condenseFlow&&(o+='"'),i=s[r=d[a]],e.replacer&&(i=e.replacer.call(s,r,i)),O(e,t,r,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),O(e,t,i,!1,!1)&&(c+=o+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),m&&(e.dump="&ref_"+p+" "+e.dump));else if("[object Array]"===d)a&&0!==e.dump.length?(e.noArrayIndent&&!c&&t>0?S(e,t-1,e.dump,r):S(e,t,e.dump,r),m&&(e.dump="&ref_"+p+e.dump)):(function(e,t,s){var a,n,r,i="",o=e.tag;for(a=0,n=s.length;a<n;a+=1)r=s[a],e.replacer&&(r=e.replacer.call(s,String(a),r)),(O(e,t,r,!1,!1)||void 0===r&&O(e,t,null,!1,!1))&&(""!==i&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=o,e.dump="["+i+"]"}(e,t,e.dump),m&&(e.dump="&ref_"+p+" "+e.dump));else{if("[object String]"!==d){if("[object Undefined]"===d)return!1;if(e.skipInvalid)return!1;throw new n("unacceptable kind of an object to dump "+d)}"?"!==e.tag&&x(e,e.dump,t,o,u)}null!==e.tag&&"?"!==e.tag&&(l=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),l="!"===e.tag[0]?"!"+l:"tag:yaml.org,2002:"===l.slice(0,18)?"!!"+l.slice(18):"!<"+l+">",e.dump=l+" "+e.dump)}return!0}function A(e,t){var s,a,n=[],r=[];for(F(e,n,r),s=0,a=r.length;s<a;s+=1)t.duplicates.push(n[r[s]]);t.usedDuplicates=new Array(a)}function F(e,t,s){var a,n,r;if(null!==e&&"object"==typeof e)if(-1!==(n=t.indexOf(e)))-1===s.indexOf(n)&&s.push(n);else if(t.push(e),Array.isArray(e))for(n=0,r=e.length;n<r;n+=1)F(e[n],t,s);else for(n=0,r=(a=Object.keys(e)).length;n<r;n+=1)F(e[a[n]],t,s)}e.exports.dump=function(e,t){var s=new m(t=t||{});s.noRefs||A(e,s);var a=e;return s.replacer&&(a=s.replacer.call({"":a},"",a)),O(s,0,a,!0,!0)?s.dump+"\n":""}},5279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeIcons=function(){s={19:chrome.runtime.getURL("theme")+"/blazemeter/images/19x19.png",38:chrome.runtime.getURL("theme")+"/blazemeter/images/38x38.png"},a={19:chrome.runtime.getURL("theme")+"/blazemeter/images/19x19_on.png",38:chrome.runtime.getURL("theme")+"/blazemeter/images/38x38_on.png"}},t.setIcon=function(e,t){if(e!==n){n=e;const r="on"===e?a:s;chrome.action.setIcon({path:r,tabId:t})}};let s=null,a=null,n="on"},5388:(e,t,s)=>{"use strict";var a=s(1231),n=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],r=["scalar","sequence","mapping"];e.exports=function(e,t){var s,i;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===n.indexOf(t))throw new a('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(s=t.styleAliases||null,i={},null!==s&&Object.keys(s).forEach((function(e){s[e].forEach((function(t){i[String(t)]=e}))})),i),-1===r.indexOf(this.kind))throw new a('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},5489:(e,t,s)=>{"use strict";e.exports=s(1769).extend({implicit:[s(127),s(1851)],explicit:[s(9342),s(6946),s(6942),s(6663)]})},6184:(e,t,s)=>{"use strict";e.exports=s(7759).extend({implicit:[s(9198),s(6199),s(4466),s(1461)]})},6199:(e,t,s)=>{"use strict";var a=s(5388);e.exports=new a("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},6634:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaybackApi=void 0;const a=s(8341),n=s(9279),r=s(7857);s(1132);const i=s(7658),o=s(8882),c=s(3026),l=s(1084);function d(e){return"answerOnNextPrompt"===e||"chooseCancelOnNextPrompt"===e||"assertPrompt"===e||"chooseOkOnNextConfirmation"===e||"chooseCancelOnNextConfirmation"===e||"assertConfirmation"===e||"assertAlert"===e||"assertDialog"===e||"answerDialog"===e}function u(e){if("string"!=typeof e)return e;let t=e.indexOf("${"),s="";for(;-1!==t;){const a=e.substring(0,t),n=e.substring(t),r=n.indexOf("}"),i=n.substring(0,r+1),o=n.substring(r+1);s+=a+(0,c.xlateArgument)(i),t=(e=o).indexOf("${")}return s+e}function p(e,t){return Number(u(e))||Number(t)}t.PlaybackApi=class{skippedSteps=[];breakPoints=[];extCommand;replayStatus="stop";frames=[];commandIndex=-1;caseFailed=!1;suite=null;skipNextBreakpoint=!1;callbacks;replayDelay=500;virtualBreakpoints=[];mapper=new i.CommandMapper;nextStepId;constructor(e,t){this.extCommand=e,this.callbacks=t}setModel(e){if(this.frames.length>0){const{partial:t,commandIndex:s,frames:a}=this.rebuildFrames(e,this.nextStepId);t?this.frames.length!==a.length&&(this.commandIndex=this.frames[a.length].lastIndex-1):this.commandIndex=s-1,this.frames=a;const n=this.findAndSaveNextStepId();this.callbacks.updateCommandStatus({status:"pending",nextStepId:n})}this.suite=e}async next(){if("pause"!==this.replayStatus&&"breakpoint"!==this.replayStatus)return;this.skipNextBreakpoint=!0;const e=this.lastFrame.steps[this.commandIndex+2];if(e)this.virtualBreakpoints.push(this.getId(e));else{if(this.lastFrame.loop){const e=this.lastFrame.steps[this.commandIndex+1];"ret"===e?.action&&this.virtualBreakpoints.push([...this.frames.map((e=>e.id)).filter((e=>e)),this.lastFrame.steps[0].id])}const e=this.frames[this.frames.length-2];if(e){const t=e.steps[this.lastFrame.lastIndex+1];t&&this.virtualBreakpoints.push([...this.frames.map((e=>e.id)).filter((e=>e)).slice(0,-1),t.id])}}await this.resume()}async stepIn(){if("pause"!==this.replayStatus&&"breakpoint"!==this.replayStatus)return;this.skipNextBreakpoint=!0;const e=this.lastFrame.steps[this.commandIndex+1];e.steps?(this.virtualBreakpoints.push([...this.frames.map((e=>e.id)).filter((e=>e)),e.id,e.steps[0].id]),await this.resume()):await this.next()}async stepOut(){if("pause"===this.replayStatus||"breakpoint"===this.replayStatus)if(this.skipNextBreakpoint=!0,this.commandIndex===this.lastFrame.steps.length)await this.next();else{const e=this.lastFrame.steps[this.lastFrame.steps.length-1];this.virtualBreakpoints.push([...this.frames.map((e=>e.id)).filter((e=>e)),e.id]),await this.resume()}}stop(){this.replayStatus="stop",this.finalizePlayingProgress()}pause(){"play"===this.replayStatus&&(this.replayStatus="pause")}async resume(){if("pause"===this.replayStatus||"breakpoint"===this.replayStatus){"breakpoint"===this.replayStatus&&(this.skipNextBreakpoint=!0),this.caseFailed=!1,this.replayStatus="play",this.callbacks.switchOnReplayStatus("playing"),this.extCommand.attach();try{await this.executionLoop(),this.finalizePlayingProgress()}catch(e){this.catchPlayingError(e)}}}async playSuite(e,t){this.callbacks.switchOnReplayStatus("playing"),this.frames.push(this.suite);try{await this.initializePlayingProgress(),await this.executionLoop(),this.finalizePlayingProgress()}catch(e){this.catchPlayingError(e)}}async initSuite(){this.frames.push(this.suite);try{await this.initializePlayingProgress(),this.virtualBreakpoints.push(this.getFirstStepId()),await this.executionLoop()}catch(e){console.log("reason: ",e),this.catchPlayingError(e)}}async playSingleCommand(e){await this.initializePlayingProgress();const{commandIndex:t,frames:s}=this.rebuildFrames(this.suite,e);this.frames=s,this.commandIndex=t;const a=this.findStepByPath(this.suite,e);if(!a)return void this.callbacks.updateCommandStatus({identifier:e,status:"fail",reason:"Step was not found"});const r=this.mapper.map(a);let{command:i,target:c,value:l}=r,p=1e4;if("waitFor"===i&&([l,p]=l.split(":",2),p=p||1e4),this.callbacks.updateCommandStatus({identifier:e,status:"pending"}),this.callbacks.switchOnReplayStatus("playing"),l="sendKeys"===i?"${"+u(l.slice(2,-1))+"}":u(l),c=u(c),o.ExtCommand.isExtCommand(i))console.log(`Executing: | ${i} | ${c} | ${l} |`),this.extCommand["do"+(0,n.titleCase)(i)](c,l).then((()=>{this.callbacks.updateCommandStatus({identifier:e,status:"success"})}),(t=>{const s="string"==typeof t?t:t.message;console.error("Command failed. Reason:",s),this.callbacks.updateCommandStatus({identifier:e,status:"fail",reason:s})})),this.callbacks.switchOnReplayStatus("paused"),this.pause();else{if(d(i))return this.callbacks.switchOnReplayStatus("paused"),this.extCommand.sendCommand(i,c,l,!0);let t;if(t=c.startsWith("cache=")?[c]:r.targetOptions&&r.targetOptions.length?r.targetOptions.map((e=>u(e[0]))):[u(c)],"waitFor"===i&&l.startsWith("not_")){let s=!0;for(let e=0;e<t.length;++e){const a=t[e];console.log(`Executing: | ${i} | ${a} | ${l} |`);const n=await this.executeCommand(i,a,l,!1,p);s=s&&"success"===n.result}if(s)return this.callbacks.updateCommandStatus({identifier:e,status:"success"}),this.callbacks.switchOnReplayStatus("paused"),void this.pause();this.callbacks.updateCommandStatus({identifier:e,status:"fail",reason:"One of the locators has matched the element!"}),this.callbacks.switchOnReplayStatus("paused"),this.caseFailed=!0,this.commandIndex--,this.pause()}else{let s;for(let a=0;a<t.length;++a){const n=t[a];if(console.log(`Executing: | ${i} | ${n} | ${l} |`),s=await this.executeCommand(i,n,l,!1,p),"success"===s.result){const t=0===a?void 0:n,s=this.findAndSaveNextStepId();return this.callbacks.updateCommandStatus({identifier:e,status:"success",nextStepId:s,successLocator:t}),this.callbacks.switchOnReplayStatus("paused"),void this.pause()}if("not-found"!==s.reason)return this.callbacks.updateCommandStatus({identifier:e,status:"fail",reason:s.result}),this.callbacks.switchOnReplayStatus("paused"),this.caseFailed=!0,this.commandIndex--,void this.pause()}1===t.length&&s?this.callbacks.updateCommandStatus({identifier:e,status:"fail",reason:s.result}):this.callbacks.updateCommandStatus({identifier:e,status:"fail",reason:"Failed to find element using provided locators"}),this.callbacks.switchOnReplayStatus("paused"),this.caseFailed=!0,this.commandIndex--,this.pause()}}}async executionLoop(){if(0===this.frames.length)return this.caseFailed?(this.caseFailed=!1,!1):(l.globalState.declaredVars={},this.callbacks.switchOnReplayStatus("stopped"),this.callbacks.successFullReplay(),!0);this.commandIndex++;const e=this.lastFrame.steps;if(this.commandIndex>=e.length){if(this.lastFrame.loop){const{loop:e,end:t,step:s}=this.lastFrame;l.globalState.declaredVars[e]+=p(s,1),l.globalState.declaredVars[e]<=p(t,0)?this.commandIndex=-1:(this.commandIndex=this.lastFrame.lastIndex,this.dropLastFrame())}else if(this.lastFrame.loopOverData){const{loopOverData:e,to:t,variable:s}=this.lastFrame;if(l.globalState.declaredVars[`lod_${e}_index`]+=1,l.globalState.declaredVars[`lod_${e}_index`]<=p(t,-1)){this.commandIndex=-1;const t=l.globalState.declaredVars[`lod_${e}_index`],a=l.globalState.declaredVars.structuredVariables[e].generatedData[t-1];for(const[e,t]of Object.entries(a??{}))l.globalState.declaredVars[`${s}.${e}`]=t}else this.commandIndex=this.lastFrame.lastIndex,this.dropLastFrame()}else this.commandIndex=this.lastFrame.lastIndex,this.dropLastFrame();return await this.executionLoop()}const t=e[this.commandIndex],s=this.getId(t);if(this.skippedSteps.some((e=>(0,a.arraysMatch)(e,s))))return await this.executionLoop();if(this.checkIfBreakpoint(s)){this.commandIndex--;const e=this.findAndSaveNextStepId();return this.callbacks.updateCommandStatus({status:"pending",nextStepId:e}),this.callbacks.switchOnReplayStatus("paused"),this.callbacks.updateStatus("Paused on breakpoint","info"),this.pause(),this.virtualBreakpoints=[],this.replayStatus="breakpoint",Promise.reject("shutdown")}if("pause"===this.replayStatus){this.commandIndex--;const e=this.findAndSaveNextStepId();return this.callbacks.updateCommandStatus({status:"pending",nextStepId:e}),this.callbacks.switchOnReplayStatus("paused"),Promise.reject("shutdown")}if("forEachLoopGroup"===t.type){let e;await this.doPreparation(),await Promise.all([this.doPrePageWait(),this.doPageWait(),this.doAjaxWait(),this.doDomWait()]),this.callbacks.updateCommandStatus({identifier:s,status:"pending"}),await(0,r.delay)(500);for(const s of t.target)if(e=await this.executeCommand("findElements",s,""),e.value)break;if(!e||!e.value){this.commandIndex--;const e=t.target[0];return this.callbacks.updateCommandStatus({identifier:s,status:"fail",reason:`Element ${e.name.toLowerCase()}=${e.value} not found`}),this.callbacks.switchOnReplayStatus("paused"),this.caseFailed=!0,this.pause(),Promise.reject("shutdown")}l.globalState.declaredVars[`obj_${t.iterator}_array`]=e.value.split(","),l.globalState.declaredVars[`obj_${t.iterator}_index`]=0;const a=[...t.steps];return a.push({action:"ret",id:"deadbeef-dead-beef-dead-beefdead"}),this.frames.push({lastIndex:this.commandIndex,loop:`obj_${t.iterator}_index`,end:l.globalState.declaredVars[`obj_${t.iterator}_array`].length-1,step:1,...t,steps:a}),this.commandIndex=-1,await this.executionLoop()}if(t.loopOverData){this.callbacks.updateCommandStatus({identifier:s,status:"pending"});const{loopOverData:e,from:a,to:n,variable:i}=t,o=p(a,0);l.globalState.declaredVars[`lod_${e}_index`]=o;const c=l.globalState.declaredVars.structuredVariables[e].generatedData[o-1];for(const[e,t]of Object.entries(c??{}))l.globalState.declaredVars[`${i}.${e}`]=t;if(l.globalState.declaredVars[`lod_${e}_index`]<=p(n,-1)){const e=[...t.steps];e.push({action:"ret",id:"deadbeef-dead-beef-dead-beefdead"}),this.frames.push({lastIndex:this.commandIndex,...t,steps:e}),this.commandIndex=-1}return await(0,r.delay)(500),await this.executionLoop()}if(t.loop){const{loop:e,start:a,end:n}=t;if(this.callbacks.updateCommandStatus({identifier:s,status:"pending"}),l.globalState.declaredVars[e]=p(a,0),l.globalState.declaredVars[e]<=p(n,-1)){const e=[...t.steps];e.push({action:"ret",id:"deadbeef-dead-beef-dead-beefdead"}),this.frames.push({lastIndex:this.commandIndex,...t,steps:e}),this.commandIndex=-1}return await(0,r.delay)(500),await this.executionLoop()}if(t.steps)return 0!==t.steps.length&&"ret"===t.steps[t.steps.length-1].action||t.steps.push({action:"ret",id:"deadbeef-dead-beef-dead-beefdead"}),this.callbacks.updateCommandStatus({identifier:s,status:"pending"}),this.frames.push({lastIndex:this.commandIndex,...t}),this.commandIndex=-1,await(0,r.delay)(500),await this.executionLoop();if(t.if){await this.doPreparation(),await Promise.all([this.doPrePageWait(),this.doPageWait(),this.doAjaxWait(),this.doDomWait()]),this.callbacks.updateCommandStatus({identifier:s,status:"pending"});const e=u(t.if),a=(await this.extCommand.sendCommand("eval",e,"")).value?t.then:t.else;return a.push({action:"ret",id:"deadbeef-dead-beef-dead-beefdead"}),this.frames.push({lastIndex:this.commandIndex,id:t.id,steps:a}),this.commandIndex=-1,await(0,r.delay)(500),await this.executionLoop()}if("publish"===t.action||"unpublish"===t.action){const e=l.globalState.declaredVars["@@publish-url"],a=l.globalState.declaredVars["@@publish-session-id"],n="publish"===t.action?"publish":"un-publish";try{return await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:n,sessionId:a,entityName:t.param,targetName:t.value})}),this.callbacks.updateCommandStatus({identifier:s,status:"success"}),await(0,r.delay)(500),await this.executionLoop()}catch(e){this.callbacks.updateCommandStatus({identifier:s,status:"fail",reason:e.message}),this.caseFailed=!0,this.callbacks.switchOnReplayStatus("paused"),this.commandIndex--,this.pause()}}if("ret"===t.action)return this.callbacks.updateCommandStatus({identifier:s.slice(0,-1),status:"success"}),await this.executionLoop();this.callbacks.updateCommandStatus({identifier:s,status:"pending"});const i=this.mapper.map(t);let{command:c,target:d,value:m}=i;if(""===c)return Promise.reject("no command name");const h=this.getDelay(c);if(await(0,r.delay)(h),o.ExtCommand.isExtCommand(c)){m=u(m),d=u(d),console.log(`Executing: | ${c} | ${d} | ${m} |`);try{await this.extCommand["do"+(0,n.titleCase)(c)](d,m),this.callbacks.updateCommandStatus({identifier:s,status:"success"})}catch(e){console.log(e),this.callbacks.updateCommandStatus({identifier:s,status:"fail",reason:e}),console.log("Test case failed"),this.caseFailed=!0,this.callbacks.switchOnReplayStatus("paused"),this.commandIndex--,this.pause()}return await this.executionLoop()}return await this.doPreparation(),await Promise.all([this.doPrePageWait(),this.doPageWait(),this.doAjaxWait(),this.doDomWait()]),await this.doCommand(),await this.executionLoop()}getDelay(e){let t=this.replayDelay;return"assertAlert"!==e&&"assertConfirmation"!==e&&"assertPrompt"!==e&&"assertDialog"!==e||(t=50),t}checkIfBreakpoint(e){return this.skipNextBreakpoint?(this.skipNextBreakpoint=!1,!1):this.virtualBreakpoints.some((t=>(0,a.arraysMatch)(e,t)))||this.breakPoints.some((t=>(0,a.arraysMatch)(e,t)))}async playAfterConnectionFailed(){if("play"===this.replayStatus)try{this.initializeAfterConnectionFailed(),await this.executionLoop(),this.finalizePlayingProgress()}catch(e){this.catchPlayingError(e)}}initializeAfterConnectionFailed(){this.replayStatus="play",this.caseFailed=!1}initializePlayingProgress(){return this.replayStatus="play",this.commandIndex=-1,this.caseFailed=!1,this.extCommand.init()}catchPlayingError(e){if(function(e){return"TypeError: response is undefined"===e||"Error: Could not establish connection. Receiving end does not exist."===e||"Could not establish connection. Receiving end does not exist."===e.message||"The message port closed before a reponse was received."===e.message||"The message port closed before a response was received."===e.message}(e))setTimeout((async()=>{this.commandIndex--,await this.playAfterConnectionFailed()}),100);else if("shutdown"===e){const e=this.findAndSaveNextStepId();this.callbacks.updateCommandStatus({status:"pending",nextStepId:e}),this.callbacks.switchOnReplayStatus("paused")}else this.extCommand.clear(),console.log(e),this.commandIndex>=0&&this.callbacks.updateCommandStatus({status:"fail",reason:e}),console.log("Test case failed"),this.callbacks.failedReplay(e),this.callbacks.switchOnReplayStatus("stop"),setTimeout((()=>{this.replayStatus="stop"}),500)}async doCommand(){const e={},t=this.lastFrame.steps,s=t[this.commandIndex],a=this.mapper.map(s);let{command:n,target:r,value:i}=a;if(t[this.commandIndex].iterator){const a=l.globalState.declaredVars[`obj_${s.iterator}_array`][l.globalState.declaredVars[`obj_${s.iterator}_index`]];if(t[this.commandIndex].target){const s="cache="+a;for(const a of t[this.commandIndex].target){const t=await this.executeCommand("findElements",a,s);if(t.value){const s=t.value.split(",")[0];e[s]=`${a.name.toLowerCase()}=${a.value}`,r="cache="+s;break}}}else r="cache="+a}let o,c=1e4;if("waitFor"===n&&([i,c]=i.split(":",2),c=c||1e4),"play"!==this.replayStatus)return this.commandIndex--,Promise.reject("shutdown");await this.stabilizePage(),i="sendKeys"===n?"${"+u(i.slice(2,-1))+"}":u(i),o=r.startsWith("cache=")?[r]:a.targetOptions&&a.targetOptions.length?a.targetOptions.map((e=>u(e[0]))):[u(r)];const p=d(n),m=this.getId(t[this.commandIndex]);if("waitFor"===n&&i.startsWith("not_")){let e=!0;for(let t=0;t<o.length;++t){const s=o[t];console.log(`Executing: | ${n} | ${s} | ${i} |`);const a=await this.executeCommand(n,s,i,p,c);e=e&&"success"===a.result}if(e)return void this.callbacks.updateCommandStatus({identifier:m,status:"success"});this.callbacks.updateCommandStatus({identifier:m,status:"fail",reason:"One of the locators has matched the element!"}),this.callbacks.switchOnReplayStatus("paused"),this.caseFailed=!0,this.commandIndex--,this.pause()}else{let t="";for(let s=0;s<o.length;++s){const a=o[s];console.log(`Executing: | ${n} | ${a} | ${i} |`);const r=await this.executeCommand(n,a,i,p,c);if("success"===r.result){const e=0===s?void 0:a;return void this.callbacks.updateCommandStatus({identifier:m,status:"success",successLocator:e})}if("not-found"!==r.reason)return this.callbacks.updateCommandStatus({identifier:m,status:"fail",reason:r.result}),this.callbacks.switchOnReplayStatus("paused"),this.caseFailed=!0,this.commandIndex--,void this.pause();if("not-found"===r.reason){t=r.result;for(const s of Object.keys(e))t.includes(s)&&(t=t.replace(`cache=${s}`,e[s]))}}1===o.length&&t?this.callbacks.updateCommandStatus({identifier:m,status:"fail",reason:t}):this.callbacks.updateCommandStatus({identifier:m,status:"fail",reason:"Failed to find element using provided locators"}),this.callbacks.switchOnReplayStatus("paused"),this.caseFailed=!0,this.commandIndex--,this.pause()}}async executeCommand(e,t,s,a=!1,n=1e4){const i=Date.now();let o;do{if(o=await this.extCommand.sendCommand(e,t,s,a),o){if("success"===o.result)return o;if(await(0,r.delay)(500),"failed"===o.status){if("waitFor"!==e&&!o.result.match(/Element[\s\S]*?not found/))return o;console.log("Wait until the element is found")}}else console.log('Got "undefined" as sendCommand result. Retrying...'),await(0,r.delay)(500)}while(Date.now()-i<n);return console.log(`Implicit Wait timed out after ${n}ms`),{status:"failed",reason:"not-found",result:o.result}}finalizePlayingProgress(){"pause"!==this.replayStatus&&this.extCommand.clear(),this.frames=[],this.commandIndex=0}findAndSaveNextStepId(){const e=this.lastFrame.steps[this.commandIndex+1];return this.nextStepId=this.getId(e),this.nextStepId}findStepByPath(e,t){let s=e;for(const e of t)s=("ifElseGroup"===s.type?[...s.then,...s.else]:[...s.steps]).find((t=>t.id===e));return s}rebuildFrames(e,t){const s=e=>e.slice(-1)[0];let a=!1;const n=[e];let r=e;for(const e of t){let t,i;if("ifElseGroup"===r.type?(i=r.then.findIndex((t=>t.id===e)),i>=0?(t=[...r.then],r=r.then[i]):(i=r.else.findIndex((t=>t.id===e)),i>=0&&(t=[...r.else],r=r.else[i]))):(i=r.steps.findIndex((t=>t.id===e)),t=[...r.steps],r=r.steps[i]),t&&(t.push({action:"ret",id:"deadbeef-dead-beef-dead-beefdead"}),s(n).steps=[...t],n.push({lastIndex:i,...r})),!r){a=!0;break}}const i=s(n).lastIndex;return n.pop(),{partial:a,commandIndex:i,frames:n}}getFirstStepId(){return this.frames&&this.frames[0].steps&&this.frames[0].steps[0].steps?[this.frames[0].steps[0].id,this.frames[0].steps[0].steps[0].id]:[]}get lastFrame(){return this.frames[this.frames.length-1]}dropLastFrame(){this.frames.pop()}getId(e){return[...this.frames.map((e=>e.id)).filter((e=>e)),e.id]}async doPreparation(){const e=Date.now();do{if("play"!==this.replayStatus)return this.commandIndex--,Promise.reject("shutdown");const e=await this.extCommand.sendCommand("waitPreparation","","");if(console.log("waitPreparation",e),e&&e.ok)return!0;console.log("wait preparation"),await(0,r.delay)(500)}while(Date.now()-e<3e4);return!1}async doPrePageWait(){if("play"!==this.replayStatus)return this.commandIndex--,Promise.reject("shutdown");const e=await this.extCommand.sendCommand("prePageWait","","");return!e||!e.new_page||await this.doPrePageWait()}async doPageWait(){const e=Date.now();do{if("play"!==this.replayStatus)return this.commandIndex--,Promise.reject("shutdown");const e=await this.extCommand.sendCommand("pageWait","","");if(console.log("pageWait",e),e&&e.page_done)return!0;console.log("Wait for the new page to be fully loaded"),await(0,r.delay)(500)}while(Date.now()-e<3e4);return console.log("Page Wait timed out after 30000ms"),!1}async doAjaxWait(){const e=Date.now();do{if("play"!==this.replayStatus)return this.commandIndex--,Promise.reject("shutdown");const e=await this.extCommand.sendCommand("ajaxWait","","");if(console.log("ajaxWait",e),e&&e.ajax_done)return!0;console.log("Wait for all ajax requests to be done"),await(0,r.delay)(50)}while(Date.now()-e<3e4);return console.log("Ajax Wait timed out after 30000ms"),!1}async doDomWait(){const e=Date.now();do{if("play"!==this.replayStatus)return this.commandIndex--,Promise.reject("shutdown");const e=await this.extCommand.sendCommand("domWait","","");if(console.log("domWait",e),e&&(Date.now()-e.dom_time>400||!e.dom_time))return!0;console.log("Wait for the DOM tree modification"),await(0,r.delay)(50)}while(Date.now()-e<3e4);return console.log("DOM Wait timed out after 30000ms"),!1}stabilizePage(){return new Promise(((e,t)=>{let s=0;const a=setInterval((()=>{"play"!==this.replayStatus&&(this.commandIndex--,t("shutdown"),clearInterval(a)),s>60&&(console.log("Timed out after 30000ms"),t("Window not Found"),clearInterval(a)),this.extCommand.getPageStatus()?(e(),clearInterval(a)):(0===s&&console.log("Wait for the new page to be fully loaded"),s++)}),500)}))}}},6663:(e,t,s)=>{"use strict";var a=s(5388),n=Object.prototype.hasOwnProperty;e.exports=new a("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,s=e;for(t in s)if(n.call(s,t)&&null!==s[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},6907:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundRecorderUI=void 0;const a=s(7315),n=s(856),r=s(3701),i=s(8424),o=s(4024);t.BackgroundRecorderUI=class{recording;recordingTab;editorTabId;debuggerTab;observers;transactions;currentSuite;defaultTestName;replayStatus;countClicks;replayWindowId;currentRecordingTabId;currentRecordingWindowId;currentRecordingFrameLocation;openedTabNames;openedTabIds;openedTabCount;openedWindowIds;contentWindowId;selfWindowId;attached;recordedDomSet;recordedDomMapping;structuredModel;currentUrl;initialRecordingWindowId;interactableActions;constructor(){this.recording="stopped",this.recordingTab=null,this.editorTabId=null,this.debuggerTab=null,this.observers=[],this.transactions=[],this.currentSuite=null,this.defaultTestName=null,this.replayStatus="stopped",this.countClicks=0,this.replayWindowId=null,this.currentRecordingTabId=null,this.currentRecordingWindowId=null,this.currentRecordingFrameLocation=null,this.openedTabNames={},this.openedTabIds={},this.openedTabCount=0,this.openedWindowIds={},this.contentWindowId=-1,this.selfWindowId=-1,this.attached=!1,this.recordedDomSet=new Set,this.recordedDomMapping=[],this.structuredModel=void 0,this.interactableActions=new Set(["assertText","assertValue","click","contextClick","doubleClick","dragAndDropObject","editContent","sendKeys","storeText","storeValue","mouseDownAt","mouseMoveAt","mouseUpAt","mouseOut","mouseOver","submit","select","type","typeSecret"]),this.rebind()}startRecording(e,t){chrome.tabs.sendMessage(t.id,{command:"attachPrompt"}).catch((()=>{})),this.attachPrompt(),(0,a.createMenus)(),this.clearRecordedDom(),this.cleanRecording(),this.switchRecordingState("record"),this.currentSuite=new o.TestSuite(e),this.recordingTab=t,this.initialRecordingWindowId=t.windowId,this.openedWindowIds[t.windowId]=!0,this.currentRecordingTabId=t.id,this.currentRecordingWindowId=t.windowId,this.openedTabNames.win_ser_local=t.id,this.openedTabIds[t.id]="win_ser_local",this.openedTabCount=1,this.currentRecordingFrameLocation="root",chrome.tabs.sendMessage(t.id,{attachRecorder:!0}).catch((()=>{})),chrome.tabs.sendMessage(this.recordingTab.id,{msg:"addTransactionPopupUi"}).catch((()=>{})),this.addObserver(t),this.currentSuite.addObserver(t),this.attach();const s=[t.width,t.height].join(",");this.recordCommand({command:"resizeWindow",value:s,target:"",targetOptions:[]}),this.currentUrl=this.recordingTab.url,(0,n.checkForForbiddenDomain)(t.url).then((e=>{e||this.recordCommand({command:"open",target:this.recordingTab.url,value:"",targetOptions:[]})}))}attachPrompt(){for(const e of Object.keys(this.openedTabIds))chrome.tabs.sendMessage(Number(e),{command:"attachPrompt"}).catch((()=>{}))}detachPrompt(){for(const e of Object.keys(this.openedTabIds))chrome.tabs.sendMessage(Number(e),{command:"detachPrompt"}).catch((()=>{}))}endRecording(e){this.detachPrompt(),this.switchRecordingState("stopped"),this.removeObserver(this.recordingTab.id);for(const e of Object.keys(this.openedTabIds))this.removeObserver(Number(e));this.currentSuite.clearObservers(),(0,a.removeMenus)(),chrome.tabs.query({},(e=>{for(const t of e)chrome.tabs.sendMessage(t.id,{detachRecorder:!0}).catch((()=>{})),chrome.tabs.sendMessage(t.id,{msg:"removeTransactionPopupUi"}).catch((()=>{}))})),this.detach(),e&&this.recordingTab.windowId===this.initialRecordingWindowId&&chrome.windows.remove(this.recordingTab.windowId)}pauseRecording(){this.switchRecordingState("pause")}resumeRecording(){this.switchRecordingState("record"),chrome.tabs.sendMessage(this.recordingTab.id,{attachRecorder:!0}).catch((()=>{}))}cleanRecording(){this.countClicks=0,this.switchRecordingState("stopped"),this.currentSuite=null,chrome.action.setBadgeText({text:""});for(const e of Object.keys(this.openedTabIds))chrome.tabs.sendMessage(Number(e),{detachRecorder:!0}).catch((()=>{})),chrome.tabs.sendMessage(Number(e),{msg:"removeTransactionPopupUi"}).catch((()=>{}));this.recordingTab=null,this.debuggerTab&&chrome.tabs.remove(this.debuggerTab.id,(()=>{this.debuggerTab=null})),this.editorTabId&&chrome.tabs.remove(this.editorTabId,(()=>{this.editorTabId=null})),this.clearRecordedDom(),this.currentRecordingTabId=null,this.currentRecordingWindowId=null,this.currentRecordingFrameLocation=null,this.openedTabNames={},this.openedTabIds={},this.openedTabCount=0,this.openedWindowIds={},this.contentWindowId=-1,this.selfWindowId=-1,this.detach()}recordCommand(e){if(this.applyFilters(e)&&("record"===this.recording||"pause"===this.recording&&e.command.startsWith("assert"))){this.notifyObservers(),this.currentSuite||(this.currentSuite=new o.TestSuite("New Test Suite")),this.countClicks++;const t=this.currentSuite.getLastTestCaseIndex(),s=this.currentSuite.test_cases[t].commands.length;e.command.match(/OnNext/i)?this.currentSuite.addCommand(t,s-1,e):this.currentSuite.addCommand(t,s,e)}}addCommand(e,t,s){this.currentSuite.addCommand(e,t,s)}addTestCase(e,t){this.currentSuite.addTestCase(e,t)}exportJson(){return this.currentSuite.test_cases.forEach(((e,t)=>{e.commands.forEach(((e,s)=>{const a=this.recordedDomMapping[t]&&this.recordedDomMapping[t][s];this.currentSuite.assignDomToCommand(t,s,Array.from(this.recordedDomSet)[a])}))})),this.currentSuite.exportJSON()}applyFilters(e){if(e.command){const t=e.targetOptions;for(const e of t)if(e&&e[0].includes("5c32565c-a0ba-42be-8060-34d2cf2285fa"))return!1}return!0}updateSuiteName(e){this.currentSuite&&(this.currentSuite.suite_name=e)}updateTestCases(e){this.currentSuite||(this.currentSuite=new o.TestSuite(e.suite_name)),this.currentSuite.updateTestCases(e)}getSuiteName(){return this.currentSuite.suite_name}getTransactions(){return this.currentSuite.test_cases.map((e=>({name:e.testStep,counter:e.commands.length})))}getTransactionsCommands(){return this.currentSuite.test_cases.map((e=>({name:e.testStep,counter:e.commands.length,commands:e.commands})))}totalCommandsCount(){let e=0;for(const t of this.currentSuite.test_cases)for(const s of t.commands)e++;return e}updateTransactions(e){this.transactions=e}addNewTestCase(e){this.currentSuite.addNewTestCase(e)}updateTestCaseName(e,t){this.currentSuite.updateTestCaseName(e,t)}updateCommandIndex(e,t,s){this.currentSuite.updateCommandIndex(e,t,s)}getTestCase(e){return this.currentSuite.getTestCase(e)}deleteCommmand(e,t){this.currentSuite.deleteCommmand(e,t)}addObserver(e){for(const t of this.observers)if(t.id===e.id)return!1;return this.observers.push(e),!0}getAllObservers(){return this.observers}deleteTestCase(e){this.currentSuite.deleteTestCase(e)}removeObserver(e){let t;for(let s=0;s<this.observers.length;s++)this.observers[s].id===e&&(t=s);t&&this.observers.splice(t,1)}notifyObservers(){for(const e of this.observers)chrome.tabs.sendMessage(e.id,{command:"recorderNotification",observable:this}).catch((()=>{}))}switchRecordingState(e){this.recording=e,this.notifyObservers()}updateBadgeCounter(e){this.countClicks=e,chrome.action.setBadgeText({text:""+this.countClicks})}updateCommand(e,t,s){this.currentSuite.updateCommand(e,t,s)}updateCommandProperty(e,t,s,a){this.currentSuite.updateCommandProperty(e,t,s,a)}loadStructuredModel(e){this.structuredModel=e}loadSuiteJSON(e){this.currentSuite||(this.currentSuite=new o.TestSuite(e.suite_name)),this.currentSuite.loadSuiteJSON(e)}addCommandAuto(e,t,s,a){let n;if(n=t.constructor===Array?{command:e,target:t[0][0],value:s,attributes:a?a.attributes:void 0,targetOptions:t}:{command:e,target:t,value:s,attributes:a?a.attributes:void 0,targetOptions:[]},this.interactableActions.has(n.command)){const e={command:"waitFor",value:"Clickable",target:n.target,targetOptions:n.targetOptions};this.recordCommand(e)}this.recordCommand(n)}addCommandBeforeLastCommand(e,t,s){const a={command:e,target:t[0][0],value:s,targetOptions:t},n=this.currentSuite.getLastTestCaseIndex(),r=this.currentSuite.test_cases[n].commands.length-1;this.addCommand(n,r-1,a)}activatedListener(e){chrome.tabs.get(e.tabId).then((e=>{(0,n.checkForForbiddenDomain)(e.url).then((t=>{if(!t){if(!this.openedTabIds.hasOwnProperty(e.id)){const t="chrome://newtab/"===e.url?'""':e.url;this.recordCommand({command:"openWindow",target:t,value:"",targetOptions:[]}),this.changeRecordingTab(e)}this.addCommandAuto("selectWindow",[[this.openedTabIds[e.id]]],""),this.currentUrl=e.url}}))}))}addCommandMessageHandler(e,t,s){if((e=e.step).command&&null!=this.openedWindowIds[t.tab.windowId]&&(0===Object.keys(this.openedTabIds).length&&(this.openedTabIds={},this.openedTabNames={},this.currentRecordingFrameLocation="root",this.currentRecordingTabId=t.tab.id,this.currentRecordingWindowId=t.tab.windowId,this.openedTabCount=1),0===Object.keys(this.openedTabIds).length&&(this.currentRecordingTabId=t.tab.id,this.currentRecordingWindowId=t.tab.windowId,this.openedTabNames.win_ser_local=t.tab.id,this.openedTabIds[t.tab.id]="win_ser_local"),null!=this.openedTabIds[t.tab.id])){if(e.frameLocation.location!==this.currentRecordingFrameLocation){const t=e.frameLocation.location.split(":"),s=e.frameLocation.locators,a=this.currentRecordingFrameLocation.split(":");for(;a.length>t.length;)this.addCommandAuto("selectFrame",[["relative=parent"]],""),a.pop();for(;0!==a.length&&a[a.length-1]!==t[a.length-1];)this.addCommandAuto("selectFrame",[["relative=parent"]],""),a.pop();for(;a.length<t.length;)this.addCommandAuto("selectFrame",[[s[a.length-1]]],""),a.push(t[a.length]);this.currentRecordingFrameLocation=e.frameLocation.location}e.command.includes("Value")&&void 0===e.value?(0,r.create_notification)("Assertion error","This element does not have property 'value'."):e.command.includes("Text")&&""===e.value?(0,r.create_notification)("Assertion error","This element does not have property 'Text'."):e.command.includes("store")?setTimeout((()=>{e.value=prompt("Enter the name of the variable"),e.insertBeforeLastCommand?this.addCommandBeforeLastCommand(e.command,e.targetOptions,e.value):this.addCommandAuto(e.command,e.targetOptions,e.value)}),100):this.addCommandAuto(e.command,e.targetOptions,e.value,{attributes:e.attributes})}}rebind(){this.activatedListener=this.activatedListener.bind(this),this.openListener=this.openListener.bind(this),this.windowsOnFocusChangedHandler=this.windowsOnFocusChangedHandler.bind(this),this.tabsOnRemovedHandler=this.tabsOnRemovedHandler.bind(this),this.webNavigationOnCreatedNavigationTargetHandler=this.webNavigationOnCreatedNavigationTargetHandler.bind(this),this.addCommandMessageHandler=this.addCommandMessageHandler.bind(this)}attach(){this.attached||(this.attached=!0,chrome.tabs.onUpdated.addListener(this.openListener),chrome.tabs.onActivated.addListener(this.activatedListener),chrome.windows.onFocusChanged.addListener(this.windowsOnFocusChangedHandler),chrome.tabs.onRemoved.addListener(this.tabsOnRemovedHandler),chrome.webNavigation.onCreatedNavigationTarget.addListener(this.webNavigationOnCreatedNavigationTargetHandler))}detach(){this.attached&&(this.attached=!1,chrome.tabs.onUpdated.removeListener(this.openListener),chrome.tabs.onActivated.removeListener(this.activatedListener),chrome.windows.onFocusChanged.removeListener(this.windowsOnFocusChangedHandler),chrome.tabs.onRemoved.removeListener(this.tabsOnRemovedHandler),chrome.webNavigation.onCreatedNavigationTarget.removeListener(this.webNavigationOnCreatedNavigationTargetHandler))}setOpenedWindow(e){this.openedWindowIds[e]=!0}setSelfWindowId(e){this.selfWindowId=e}getSelfWindowId(){return this.selfWindowId}openListener(e,t,s){if(null!=t.url){const e=(0,i.checkUrlsMatch)(this.currentUrl,t.url);(0,n.checkForForbiddenDomain)(s.url).then((s=>{e||s||("chrome://newtab/"===t.url||this.recordCommand({command:"open",target:t.url,value:"",targetOptions:[]}),this.currentUrl=t.url)}))}}tabsOnActivatedHandler(e){0!==Object.keys(this.openedTabIds).length&&setTimeout((()=>{this.currentRecordingTabId===e.tabId&&this.currentRecordingWindowId===e.windowId||0!==this.totalCommandsCount()&&void 0!==this.openedTabIds[e.tabId]&&(this.currentRecordingTabId=e.tabId,this.currentRecordingWindowId=e.windowId,this.currentRecordingFrameLocation="root",this.addCommandAuto("selectWindow",[[this.openedTabIds[e.tabId]]],""))}),150)}windowsOnFocusChangedHandler(e){0!==Object.keys(this.openedTabIds).length&&e!==chrome.windows.WINDOW_ID_NONE&&this.currentRecordingWindowId!==e&&chrome.tabs.query({windowId:e,active:!0}).then((t=>{if(0!==t.length&&!this.isPrivilegedPage(t[0].url)&&t[0].id!==this.currentRecordingTabId){if(0===this.totalCommandsCount())return;if(void 0===this.openedTabIds[t[0].id])return;this.currentRecordingWindowId=e,this.currentRecordingTabId=t[0].id,this.currentRecordingFrameLocation="root",this.addCommandAuto("selectWindow",[[this.openedTabIds[t[0].id]]],"")}}))}tabsOnRemovedHandler(e,t){0!==Object.keys(this.openedTabIds).length&&void 0!==this.openedTabIds[e]&&(this.currentRecordingTabId!==e?(this.addCommandAuto("selectWindow",[[this.openedTabIds[e]]],""),this.addCommandAuto("close",[[this.openedTabIds[e]]],""),this.addCommandAuto("selectWindow",[[this.openedTabIds[this.currentRecordingTabId]]],"")):this.addCommandAuto("close",[[this.openedTabIds[e]]],""),this.removeObserver(e),this.currentSuite.removeObserver(e),delete this.openedTabNames[this.openedTabIds[e]],delete this.openedTabIds[e],this.currentRecordingFrameLocation="root")}webNavigationOnCreatedNavigationTargetHandler(e){void 0!==this.openedTabIds[e.sourceTabId]&&(this.openedTabNames["win_ser_"+this.openedTabCount]=e.tabId,this.openedTabIds[e.tabId]="win_ser_"+this.openedTabCount,chrome.tabs.get(e.tabId).then((e=>{this.setOpenedWindow(e.windowId),this.currentSuite.addObserver(e),this.addObserver(e)})),this.openedTabCount++,this.attachPrompt())}isPrivilegedPage(e){return"moz-extension"===e.substr(0,13)||"chrome-extension"===e.substr(0,16)}clearRecordedDom(){this.recordedDomMapping=[],this.recordedDomSet.clear()}changeRecordingTab(e){chrome.tabs.sendMessage(e.id,{command:"attachPrompt"}).catch((()=>{})),this.attachPrompt(),this.recordingTab=e,this.openedWindowIds[e.windowId]=!0,this.currentRecordingTabId=e.id,this.currentRecordingWindowId=e.windowId;const t="win_ser_"+this.openedTabCount;this.openedTabIds.hasOwnProperty(e.id)||(this.openedTabNames[t]=e.id,this.openedTabIds[e.id]=t,this.currentRecordingFrameLocation="root",this.openedTabCount++),chrome.tabs.sendMessage(e.id,{attachRecorder:!0}).catch((()=>{})),chrome.tabs.sendMessage(this.recordingTab.id,{msg:"addTransactionPopupUi"}).catch((()=>{})),this.addObserver(e),this.currentSuite.addObserver(e)}}},6942:(e,t,s)=>{"use strict";var a=s(5388),n=Object.prototype.toString;e.exports=new a("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,s,a,r,i,o=e;for(i=new Array(o.length),t=0,s=o.length;t<s;t+=1){if(a=o[t],"[object Object]"!==n.call(a))return!1;if(1!==(r=Object.keys(a)).length)return!1;i[t]=[r[0],a[r[0]]]}return!0},construct:function(e){if(null===e)return[];var t,s,a,n,r,i=e;for(r=new Array(i.length),t=0,s=i.length;t<s;t+=1)a=i[t],n=Object.keys(a),r[t]=[n[0],a[n[0]]];return r}})},6946:(e,t,s)=>{"use strict";var a=s(5388),n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=new a("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,s,a,i,o,c=[],l=e;for(t=0,s=l.length;t<s;t+=1){if(a=l[t],o=!1,"[object Object]"!==r.call(a))return!1;for(i in a)if(n.call(a,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==c.indexOf(i))return!1;c.push(i)}return!0},construct:function(e){return null!==e?e:[]}})},7210:(e,t,s)=>{"use strict";var a=s(9243),n=s(4781);function r(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}e.exports.Type=s(5388),e.exports.Schema=s(2119),e.exports.FAILSAFE_SCHEMA=s(7759),e.exports.JSON_SCHEMA=s(6184),e.exports.CORE_SCHEMA=s(1769),e.exports.DEFAULT_SCHEMA=s(5489),e.exports.load=a.load,e.exports.loadAll=a.loadAll,e.exports.dump=n.dump,e.exports.YAMLException=s(1231),e.exports.types={binary:s(9342),float:s(1461),map:s(2369),null:s(9198),pairs:s(6942),set:s(6663),timestamp:s(127),bool:s(6199),int:s(4466),merge:s(1851),omap:s(6946),seq:s(8636),str:s(7212)},e.exports.safeLoad=r("safeLoad","load"),e.exports.safeLoadAll=r("safeLoadAll","loadAll"),e.exports.safeDump=r("safeDump","dump")},7212:(e,t,s)=>{"use strict";var a=s(5388);e.exports=new a("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},7315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMenus=function(){const e=["page","frame","selection","link","editable"],t=()=>{chrome.runtime.lastError&&console.log("ERROR: "+chrome.runtime.lastError.message)};chrome.contextMenus.create({id:"Selenium Asserts",title:"Selenium Asserts",enabled:!1,contexts:e},t);for(const a of s)chrome.contextMenus.create({id:a,title:a,documentUrlPatterns:["<all_urls>"],contexts:e},t);chrome.contextMenus.create({id:"separator",type:"separator",contexts:e},t),chrome.contextMenus.create({id:"JMX Asserts",title:"JMX Asserts",enabled:!1,contexts:e},t);for(const s of a)chrome.contextMenus.create({id:s,title:s,documentUrlPatterns:["<all_urls>"],contexts:e},t)},t.removeMenus=function(){chrome.contextMenus.removeAll()};const s=["assertText","assertTitle","assertValue","storeText","storeTitle","storeValue"],a=["assertSelection","assertResponseCode"]},7658:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandMapper=void 0;const a=s(8387);t.CommandMapper=class{actionsMap={click:"clickAt",type:"type",typeSecret:"typeSecret",keys:"sendKeys",assertText:"assertText",assertValue:"assertValue",assertTitle:"assertTitle",doubleClick:"doubleClick",contextClick:"contextMenuAt",mouseDown:"mouseDownAt",mouseMove:"mouseMoveAt",mouseUp:"mouseUpAt",select:"select",storeText:"storeText",storeTitle:"storeTitle",storeValue:"storeValue",storeString:"store",submit:"submit",scriptEval:"runScript",closeWindow:"close",drag:"dragAndDropToObject",echoString:"echo",editContent:"editContent",switchFrame:"selectFrame",switchWindow:"selectWindow",pauseFor:"pause",go:"open",openWindow:"openWindow",resizeWindow:"resizeWindow",maximizeWindow:"maximizeWindow",waitFor:"waitFor",answerDialog:"answerDialog",assertDialog:"assertDialog",storeEval:"storeEval",assertEval:"assertEval",mouseOver:"mouseOver",mouseOut:"mouseOut"};conditions={Present:"present",NotPresent:"not_present",Visible:"visible",NotVisible:"not_visible",Clickable:"clickable",NotClickable:"not_clickable"};selectorsMap={name:e=>"name="+e,linktext:e=>"linkText="+e,id:e=>"id="+e,css:e=>"css="+e,xpath:e=>e.startsWith("//")?e:"xpath="+e,shadow:e=>"shadow="+e};map(e){const t=this.actionsMap[e.action];let s=e.value||e.param||"",n="",r=[];if("keys"===e.action&&(s="${"+s+"}"),"waitFor"===e.action&&(s=`${this.conditions[e.param]}:${(0,a.dehumanizeTime)(e.value)}`),"drag"===e.action){if(r=this.populateTargets(e.source),e.target&&e.target.length>0){const t=e.target[0],a=t.name.toLowerCase();s=(0,this.selectorsMap[a])(t.value)}}else r=this.populateTargets(e.target);return r.length>0&&(n=r[0][0]),["open","openWindow","selectFrame","assertTitle","close","selectWindow","echo","store","runScript","storeEval","assertEval","answerDialog","assertDialog"].includes(t)&&(n=e.param),{command:t,value:s,target:n,targetOptions:r}}populateTargets(e){if(!e||0===e.length)return[];const t=[];for(const s of e){const e=s.name.toLowerCase(),a=this.selectorsMap[e];t.push([a(s.value),e])}return t}}},7759:(e,t,s)=>{"use strict";var a=s(2119);e.exports=new a({explicit:[s(7212),s(8636),s(2369)]})},7857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=function(e){return new Promise((t=>setTimeout(t,e)))},t.forAllTabs=function(e){chrome.tabs.query({}).then((t=>{for(const s of t)s.url.startsWith("chrome-extension://")||s.url.startsWith("chrome://")||e(s)}))}},8083:(e,t,s)=>{"use strict";var a=s(8433);function n(e,t,s,a,n){var r="",i="",o=Math.floor(n/2)-1;return a-t>o&&(t=a-o+(r=" ... ").length),s-a>o&&(s=a+o-(i=" ...").length),{str:r+e.slice(t,s).replace(/\t/g,"")+i,pos:a-t+r.length}}function r(e,t){return a.repeat(" ",t-e.length)+e}e.exports=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var s,i=/\r?\n|\r|\0/g,o=[0],c=[],l=-1;s=i.exec(e.buffer);)c.push(s.index),o.push(s.index+s[0].length),e.position<=s.index&&l<0&&(l=o.length-2);l<0&&(l=o.length-1);var d,u,p="",m=Math.min(e.line+t.linesAfter,c.length).toString().length,h=t.maxLength-(t.indent+m+3);for(d=1;d<=t.linesBefore&&!(l-d<0);d++)u=n(e.buffer,o[l-d],c[l-d],e.position-(o[l]-o[l-d]),h),p=a.repeat(" ",t.indent)+r((e.line-d+1).toString(),m)+" | "+u.str+"\n"+p;for(u=n(e.buffer,o[l],c[l],e.position,h),p+=a.repeat(" ",t.indent)+r((e.line+1).toString(),m)+" | "+u.str+"\n",p+=a.repeat("-",t.indent+m+3+u.pos)+"^\n",d=1;d<=t.linesAfter&&!(l+d>=c.length);d++)u=n(e.buffer,o[l+d],c[l+d],e.position-(o[l]-o[l+d]),h),p+=a.repeat(" ",t.indent)+r((e.line+d+1).toString(),m)+" | "+u.str+"\n";return p.replace(/\n$/,"")}},8341:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arraysMatch=function(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}},8387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dehumanizeTime=function(e){const t=[...e.matchAll(/([\d.\-infa]+)([a-zA-Z]*)/gi)];let s=0;for(const[e,a,n]of t)"ms"===n?s+=Number(a)/1e3:n&&"s"!==n?"m"===n?s+=60*Number(a):"h"===n?s+=60*Number(a)*60:"d"===n&&(s+=60*Number(a)*60*24):s+=Number(a);return 1e3*s}},8424:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFromRoot=function(e,t){if(void 0===t)return!1;const s=new URL(t).hostname;return s===e||new RegExp("([\\.]+"+e+")(?![0-9a-zA-Z\\-\\.])","gi").test(s)},t.checkUrlsMatch=function(e,t){try{return new URL(e).hostname===new URL(t).hostname}catch(e){return!1}},t.url_is_filepath=function(e){const t=function(e){const t=e.split(/[#?]/)[0].split(".").pop().trim();return!0===/^[a-zA-Z0-9]*$/.test(t)?t:null}(e);return!!t&&["atom","json","map","topojson","jsonld","rss","geojson","rdf","xml","js","webmanifest","webapp","appcache","mid","midi","kar","aac","f4a","f4b","m4a","mp3","oga","ogg","opus","ra","wav","bmp","gif","jpeg","jpg","jxr","hdp","wdp","png","svg","svgz","tif","tiff","wbmp","webp","jng","3gp","3gpp","f4p","f4v","m4v","mp4","mpeg","mpg","ogv","mov","webm","flv","mng","asf","asx","wmv","avi","cur","ico","doc","xls","ppt","docx","xlsx","pptx","deb","woff","woff2","eot","ttc","ttf","otf","ear","jar","war","hqx","bin","deb","dll","dmg","img","iso","msi","msm","msp","safariextz","pdf","ai","eps","ps","rtf","kml","kmz","wmlc","7z","bbaw","torrent","crx","cco","jardiff","jnlp","run","iso","oex","pl","pm","pdb","prc","rar","rpm","sea","swf","sit","tcl","tk","crt","der","pem","xpi","exe","xhtml","xsl","zip","css","csv","htm","html","shtml","md","mml","txt","vcard","vcf","xloc","jad","wml","vtt","htc","desktop","md","ts","ico","jar","so"].includes(t)},t.getTrafficUrls=function(e,t){const s={};if("mode-record"===e)for(const e of Object.keys(t)){const n=(0,a.parseURL)(t[e].url);s[n]||"undefined.undefined"===n||(s[n]=n)}return s};const a=s(9505)},8433:e=>{"use strict";function t(e){return null==e}e.exports.isNothing=t,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:t(e)?[]:[e]},e.exports.repeat=function(e,t){var s,a="";for(s=0;s<t;s+=1)a+=e;return a},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var s,a,n,r;if(t)for(s=0,a=(r=Object.keys(t)).length;s<a;s+=1)e[n=r[s]]=t[n];return e}},8636:(e,t,s)=>{"use strict";var a=s(5388);e.exports=new a("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},8882:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtCommand=void 0;const a=s(8387),n=s(7857);class r{static isExtCommand(e){switch(e){case"pause":case"open":case"selectFrame":case"selectWindow":case"openWindow":case"close":return!0;default:return!1}}static isAddOnPage(e){return e.startsWith("https://addons.mozilla.org")||e.startsWith("https://chrome.google.com/webstore")}attached;playingTabNames;playingTabIds;playingTabStatus;playingFrameLocations;playingTabCount;currentPlayingTabId;contentWindowId;currentPlayingFrameLocation;waitInterval;waitTimes;currentPlayingWindowId;tabsOnUpdatedHandler;frameLocationMessageHandler;newTabHandler;constructor(e){this.playingTabNames={},this.playingTabIds={},this.playingTabStatus={},this.playingFrameLocations={},this.playingTabCount=1,this.currentPlayingTabId=-1,this.contentWindowId=e||-1,this.currentPlayingFrameLocation="root",this.waitInterval=500,this.waitTimes=60,this.attached=!1,this.tabsOnUpdatedHandler=(e,t)=>{t.status&&("loading"===t.status?this.setLoading(e):this.setComplete(e))},this.frameLocationMessageHandler=(e,t)=>{e.frameLocation&&this.setFrame(t.tab.id,e.frameLocation,t.frameId)},this.newTabHandler=e=>{this.hasTab(e.sourceTabId)&&this.setNewTab(e.tabId)}}init(){return this.attach(),this.playingTabNames={},this.playingTabIds={},this.playingTabStatus={},this.playingFrameLocations={},this.playingTabCount=1,this.currentPlayingWindowId=this.contentWindowId,this.currentPlayingFrameLocation="root",this.queryActiveTab(this.currentPlayingWindowId).then((e=>this.setFirstTab(e)))}clear(){this.detach(),this.playingTabNames={},this.playingTabIds={},this.playingTabStatus={},this.playingFrameLocations={},this.playingTabCount=1,this.currentPlayingWindowId=void 0}attach(){this.attached||(this.attached=!0,chrome.tabs.onUpdated.addListener(this.tabsOnUpdatedHandler),chrome.runtime.onMessage.addListener(this.frameLocationMessageHandler),chrome.webNavigation.onCreatedNavigationTarget.addListener(this.newTabHandler))}detach(){this.attached&&(this.attached=!1,chrome.tabs.onUpdated.removeListener(this.tabsOnUpdatedHandler),chrome.runtime.onMessage.removeListener(this.frameLocationMessageHandler),chrome.webNavigation.onCreatedNavigationTarget.removeListener(this.newTabHandler))}setContentWindowId(e){this.contentWindowId=e}getContentWindowId(){return this.contentWindowId}getCurrentPlayingFrameLocation(){return this.currentPlayingFrameLocation}getCurrentPlayingTabId(){return this.currentPlayingTabId}getFrameId(e){return e>=0?this.playingFrameLocations[e][this.currentPlayingFrameLocation]:this.playingFrameLocations[this.currentPlayingTabId][this.currentPlayingFrameLocation]}getCurrentPlayingFrameId(){return this.getFrameId(this.currentPlayingTabId)}getPageStatus(){return this.playingTabStatus[this.getCurrentPlayingTabId()]}queryActiveTab(e){return chrome.tabs.query({windowId:e,active:!0,url:["http://*/*","https://*/*"]}).then((e=>e[0]))}sendCommand(e,t,s,a){const n=this.getCurrentPlayingTabId(),r=this.getCurrentPlayingFrameId();return chrome.tabs.sendMessage(n,{commands:e,target:t,value:s},{frameId:a?0:r}).catch((()=>{}))}setComplete(e){this.initTabInfo(e),this.playingTabStatus[e]=!0}setFrame(e,t,s){this.playingFrameLocations[e][t]=s}hasTab(e){return!!this.playingTabIds[e]}setNewTab(e){this.currentPlayingTabId=e,this.playingTabNames["win_ser_"+this.playingTabCount]=e,this.playingTabIds[e]="win_ser_"+this.playingTabCount,this.playingTabCount++}doOpen(e){return chrome.tabs.update(this.currentPlayingTabId,{url:e})}doPause(e,t){return new Promise((e=>{setTimeout(e,(0,a.dehumanizeTime)(t))}))}async doSelectFrame(e){let t=20;const s=e.match(/(index|relative) *= *([\d]+|parent)/i);if(s&&s[2]){const e=s[2];return"parent"===e?this.currentPlayingFrameLocation=this.currentPlayingFrameLocation.slice(0,this.currentPlayingFrameLocation.lastIndexOf(":")):this.currentPlayingFrameLocation+=":"+e,this.wait("playingFrameLocations",this.currentPlayingTabId,this.currentPlayingFrameLocation)}try{do{await(0,n.delay)(500);const s=await this.sendCommand("findFrame",e,"");if(s.value>=0)return this.currentPlayingFrameLocation+=":"+s.value,Promise.resolve();t--}while(t>0);return Promise.reject("Failed to find iFrame")}catch(e){return Promise.reject(e)}}doSelectWindow(e){let t=this;return chrome.runtime.sendMessage({command:"get_debuggerTab"}).then((e=>{chrome.windows.update(e.debuggerTab.windowId,{focused:!0})})).catch((()=>{})),this.currentPlayingFrameLocation="root",this.wait("playingTabNames",e).then((function(){t.currentPlayingTabId=t.playingTabNames[e],chrome.tabs.update(t.currentPlayingTabId,{active:!0})}))}doClose(){const e=this.currentPlayingTabId;return this.currentPlayingTabId=-1,delete this.playingFrameLocations[e],chrome.tabs.remove(e)}async doOpenWindow(e){const t='""'===e?"chrome://newtab/":e,s=await chrome.tabs.create({url:t});await chrome.tabs.update(s.id,{active:!0}),this.currentPlayingTabId=s.id,this.setNewTab(s.id)}wait(...e){if(!e.length)return Promise.reject("No arguments");let t=this;const s=e[e.length-1];for(let s=0;s<e.length-1;s++){if(!t[e[s]]||!(t[e[s]]instanceof Array||t[e[s]]instanceof Object))return Promise.reject("Invalid Argument");t=t[e[s]]}return new Promise(((e,a)=>{let n=0;const r=setInterval((()=>{void 0===t[s]||!1===t[s]?(n++,n>this.waitTimes&&(a("Timeout"),clearInterval(r))):(e(),clearInterval(r))}),this.waitInterval)}))}initTabInfo(e,t){this.playingFrameLocations[e]&&!t||(this.playingFrameLocations[e]={},this.playingFrameLocations[e].root=0)}setLoading(e){this.initTabInfo(e),this.playingTabStatus[e]=!1}updateOrCreateTab(){let e=this;return chrome.tabs.query({windowId:e.currentPlayingWindowId,active:!0}).then((function(t){if(0===t.length)return chrome.windows.create({url:"https://google.com"}).then((function(t){e.setFirstTab(t.tabs[0]),e.contentWindowId=t.id}));{let s=null;return chrome.tabs.update(t[0].id,{url:"https://google.com"}).then((function(t){return s=t,e.wait("playingTabStatus",t.id)})).then((function(){s.url="https://google.com",e.setFirstTab(s)}))}}))}setFirstTab(e){if(!e||e.url&&r.isAddOnPage(e.url))return this.updateOrCreateTab();this.currentPlayingTabId=e.id,this.playingTabNames.win_ser_local=this.currentPlayingTabId,this.playingTabNames.win_ser_0=this.currentPlayingTabId,this.playingTabIds[this.currentPlayingTabId]="win_ser_local",this.playingFrameLocations[this.currentPlayingTabId]={},this.playingFrameLocations[this.currentPlayingTabId].root=0,this.playingTabStatus[this.currentPlayingTabId]=!0}}t.ExtCommand=r},9118:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=s(1131);class n{sessions=new Map;constructor(e){e.name.startsWith("dbg-")&&(this.sessions.has(e.name)?console.warn("Session already exists",e):(console.info("Creating the session",e),this.sessions.set(e.name,new a.RemoteDebuggerSession(e)),e.onDisconnect.addListener((e=>{console.info("Deleting the session",e.name),this.sessions.delete(e.name)}))))}}chrome.runtime.onConnect.addListener((e=>{console.log("Connected debugger port...!"),new n(e)}))},9198:(e,t,s)=>{"use strict";var a=s(5388);e.exports=new a("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})},9243:(e,t,s)=>{"use strict";var a=s(8433),n=s(1231),r=s(8083),i=s(5489),o=Object.prototype.hasOwnProperty,c=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,l=/[\x85\u2028\u2029]/,d=/[,\[\]\{\}]/,u=/^(?:!|!!|![a-z\-]+!)$/i,p=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function m(e){return Object.prototype.toString.call(e)}function h(e){return 10===e||13===e}function f(e){return 9===e||32===e}function g(e){return 9===e||32===e||10===e||13===e}function b(e){return 44===e||91===e||93===e||123===e||125===e}function y(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function v(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function w(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var _=new Array(256),x=new Array(256),T=0;T<256;T++)_[T]=v(T)?1:0,x[T]=v(T);function I(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||i,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function k(e,t){var s={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return s.snippet=r(s),new n(t,s)}function S(e,t){throw k(e,t)}function C(e,t){e.onWarning&&e.onWarning.call(null,k(e,t))}var O={YAML:function(e,t,s){var a,n,r;null!==e.version&&S(e,"duplication of %YAML directive"),1!==s.length&&S(e,"YAML directive accepts exactly one argument"),null===(a=/^([0-9]+)\.([0-9]+)$/.exec(s[0]))&&S(e,"ill-formed argument of the YAML directive"),n=parseInt(a[1],10),r=parseInt(a[2],10),1!==n&&S(e,"unacceptable YAML version of the document"),e.version=s[0],e.checkLineBreaks=r<2,1!==r&&2!==r&&C(e,"unsupported YAML version of the document")},TAG:function(e,t,s){var a,n;2!==s.length&&S(e,"TAG directive accepts exactly two arguments"),a=s[0],n=s[1],u.test(a)||S(e,"ill-formed tag handle (first argument) of the TAG directive"),o.call(e.tagMap,a)&&S(e,'there is a previously declared suffix for "'+a+'" tag handle'),p.test(n)||S(e,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch(t){S(e,"tag prefix is malformed: "+n)}e.tagMap[a]=n}};function A(e,t,s,a){var n,r,i,o;if(t<s){if(o=e.input.slice(t,s),a)for(n=0,r=o.length;n<r;n+=1)9===(i=o.charCodeAt(n))||32<=i&&i<=1114111||S(e,"expected valid JSON character");else c.test(o)&&S(e,"the stream contains non-printable characters");e.result+=o}}function F(e,t,s,n){var r,i,c,l;for(a.isObject(s)||S(e,"cannot merge mappings; the provided source object is unacceptable"),c=0,l=(r=Object.keys(s)).length;c<l;c+=1)i=r[c],o.call(t,i)||(t[i]=s[i],n[i]=!0)}function M(e,t,s,a,n,r,i,c,l){var d,u;if(Array.isArray(n))for(d=0,u=(n=Array.prototype.slice.call(n)).length;d<u;d+=1)Array.isArray(n[d])&&S(e,"nested arrays are not supported inside keys"),"object"==typeof n&&"[object Object]"===m(n[d])&&(n[d]="[object Object]");if("object"==typeof n&&"[object Object]"===m(n)&&(n="[object Object]"),n=String(n),null===t&&(t={}),"tag:yaml.org,2002:merge"===a)if(Array.isArray(r))for(d=0,u=r.length;d<u;d+=1)F(e,t,r[d],s);else F(e,t,r,s);else e.json||o.call(s,n)||!o.call(t,n)||(e.line=i||e.line,e.lineStart=c||e.lineStart,e.position=l||e.position,S(e,"duplicated mapping key")),"__proto__"===n?Object.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0,value:r}):t[n]=r,delete s[n];return t}function N(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):S(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function P(e,t,s){for(var a=0,n=e.input.charCodeAt(e.position);0!==n;){for(;f(n);)9===n&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),n=e.input.charCodeAt(++e.position);if(t&&35===n)do{n=e.input.charCodeAt(++e.position)}while(10!==n&&13!==n&&0!==n);if(!h(n))break;for(N(e),n=e.input.charCodeAt(e.position),a++,e.lineIndent=0;32===n;)e.lineIndent++,n=e.input.charCodeAt(++e.position)}return-1!==s&&0!==a&&e.lineIndent<s&&C(e,"deficient indentation"),a}function j(e){var t,s=e.position;return!(45!==(t=e.input.charCodeAt(s))&&46!==t||t!==e.input.charCodeAt(s+1)||t!==e.input.charCodeAt(s+2)||(s+=3,0!==(t=e.input.charCodeAt(s))&&!g(t)))}function R(e,t){1===t?e.result+=" ":t>1&&(e.result+=a.repeat("\n",t-1))}function L(e,t){var s,a,n=e.tag,r=e.anchor,i=[],o=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),a=e.input.charCodeAt(e.position);0!==a&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),45===a)&&g(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,P(e,!0,-1)&&e.lineIndent<=t)i.push(null),a=e.input.charCodeAt(e.position);else if(s=e.line,q(e,t,3,!1,!0),i.push(e.result),P(e,!0,-1),a=e.input.charCodeAt(e.position),(e.line===s||e.lineIndent>t)&&0!==a)S(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=n,e.anchor=r,e.kind="sequence",e.result=i,!0)}function E(e){var t,s,a,n,r=!1,i=!1;if(33!==(n=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&S(e,"duplication of a tag property"),60===(n=e.input.charCodeAt(++e.position))?(r=!0,n=e.input.charCodeAt(++e.position)):33===n?(i=!0,s="!!",n=e.input.charCodeAt(++e.position)):s="!",t=e.position,r){do{n=e.input.charCodeAt(++e.position)}while(0!==n&&62!==n);e.position<e.length?(a=e.input.slice(t,e.position),n=e.input.charCodeAt(++e.position)):S(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==n&&!g(n);)33===n&&(i?S(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(t-1,e.position+1),u.test(s)||S(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),n=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),d.test(a)&&S(e,"tag suffix cannot contain flow indicator characters")}a&&!p.test(a)&&S(e,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch(t){S(e,"tag name is malformed: "+a)}return r?e.tag=a:o.call(e.tagMap,s)?e.tag=e.tagMap[s]+a:"!"===s?e.tag="!"+a:"!!"===s?e.tag="tag:yaml.org,2002:"+a:S(e,'undeclared tag handle "'+s+'"'),!0}function W(e){var t,s;if(38!==(s=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&S(e,"duplication of an anchor property"),s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!g(s)&&!b(s);)s=e.input.charCodeAt(++e.position);return e.position===t&&S(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function q(e,t,s,n,r){var i,c,l,d,u,p,m,v,T,I=1,k=!1,C=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=c=l=4===s||3===s,n&&P(e,!0,-1)&&(k=!0,e.lineIndent>t?I=1:e.lineIndent===t?I=0:e.lineIndent<t&&(I=-1)),1===I)for(;E(e)||W(e);)P(e,!0,-1)?(k=!0,l=i,e.lineIndent>t?I=1:e.lineIndent===t?I=0:e.lineIndent<t&&(I=-1)):l=!1;if(l&&(l=k||r),1!==I&&4!==s||(v=1===s||2===s?t:t+1,T=e.position-e.lineStart,1===I?l&&(L(e,T)||function(e,t,s){var a,n,r,i,o,c,l,d=e.tag,u=e.anchor,p={},m=Object.create(null),h=null,b=null,y=null,v=!1,w=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=p),l=e.input.charCodeAt(e.position);0!==l;){if(v||-1===e.firstTabInLine||(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),a=e.input.charCodeAt(e.position+1),r=e.line,63!==l&&58!==l||!g(a)){if(i=e.line,o=e.lineStart,c=e.position,!q(e,s,2,!1,!0))break;if(e.line===r){for(l=e.input.charCodeAt(e.position);f(l);)l=e.input.charCodeAt(++e.position);if(58===l)g(l=e.input.charCodeAt(++e.position))||S(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(M(e,p,m,h,b,null,i,o,c),h=b=y=null),w=!0,v=!1,n=!1,h=e.tag,b=e.result;else{if(!w)return e.tag=d,e.anchor=u,!0;S(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!w)return e.tag=d,e.anchor=u,!0;S(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(v&&(M(e,p,m,h,b,null,i,o,c),h=b=y=null),w=!0,v=!0,n=!0):v?(v=!1,n=!0):S(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=a;if((e.line===r||e.lineIndent>t)&&(v&&(i=e.line,o=e.lineStart,c=e.position),q(e,t,4,!0,n)&&(v?b=e.result:y=e.result),v||(M(e,p,m,h,b,y,i,o,c),h=b=y=null),P(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===r||e.lineIndent>t)&&0!==l)S(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&M(e,p,m,h,b,null,i,o,c),w&&(e.tag=d,e.anchor=u,e.kind="mapping",e.result=p),w}(e,T,v))||function(e,t){var s,a,n,r,i,o,c,l,d,u,p,m,h=!0,f=e.tag,b=e.anchor,y=Object.create(null);if(91===(m=e.input.charCodeAt(e.position)))i=93,l=!1,r=[];else{if(123!==m)return!1;i=125,l=!0,r={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),m=e.input.charCodeAt(++e.position);0!==m;){if(P(e,!0,t),(m=e.input.charCodeAt(e.position))===i)return e.position++,e.tag=f,e.anchor=b,e.kind=l?"mapping":"sequence",e.result=r,!0;h?44===m&&S(e,"expected the node content, but found ','"):S(e,"missed comma between flow collection entries"),p=null,o=c=!1,63===m&&g(e.input.charCodeAt(e.position+1))&&(o=c=!0,e.position++,P(e,!0,t)),s=e.line,a=e.lineStart,n=e.position,q(e,t,1,!1,!0),u=e.tag,d=e.result,P(e,!0,t),m=e.input.charCodeAt(e.position),!c&&e.line!==s||58!==m||(o=!0,m=e.input.charCodeAt(++e.position),P(e,!0,t),q(e,t,1,!1,!0),p=e.result),l?M(e,r,y,u,d,p,s,a,n):o?r.push(M(e,null,y,u,d,p,s,a,n)):r.push(d),P(e,!0,t),44===(m=e.input.charCodeAt(e.position))?(h=!0,m=e.input.charCodeAt(++e.position)):h=!1}S(e,"unexpected end of the stream within a flow collection")}(e,v)?C=!0:(c&&function(e,t){var s,n,r,i,o,c=1,l=!1,d=!1,u=t,p=0,m=!1;if(124===(i=e.input.charCodeAt(e.position)))n=!1;else{if(62!==i)return!1;n=!0}for(e.kind="scalar",e.result="";0!==i;)if(43===(i=e.input.charCodeAt(++e.position))||45===i)1===c?c=43===i?3:2:S(e,"repeat of a chomping mode identifier");else{if(!((r=48<=(o=i)&&o<=57?o-48:-1)>=0))break;0===r?S(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):d?S(e,"repeat of an indentation width identifier"):(u=t+r-1,d=!0)}if(f(i)){do{i=e.input.charCodeAt(++e.position)}while(f(i));if(35===i)do{i=e.input.charCodeAt(++e.position)}while(!h(i)&&0!==i)}for(;0!==i;){for(N(e),e.lineIndent=0,i=e.input.charCodeAt(e.position);(!d||e.lineIndent<u)&&32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position);if(!d&&e.lineIndent>u&&(u=e.lineIndent),h(i))p++;else{if(e.lineIndent<u){3===c?e.result+=a.repeat("\n",l?1+p:p):1===c&&l&&(e.result+="\n");break}for(n?f(i)?(m=!0,e.result+=a.repeat("\n",l?1+p:p)):m?(m=!1,e.result+=a.repeat("\n",p+1)):0===p?l&&(e.result+=" "):e.result+=a.repeat("\n",p):e.result+=a.repeat("\n",l?1+p:p),l=!0,d=!0,p=0,s=e.position;!h(i)&&0!==i;)i=e.input.charCodeAt(++e.position);A(e,s,e.position,!1)}}return!0}(e,v)||function(e,t){var s,a,n;if(39!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,a=n=e.position;0!==(s=e.input.charCodeAt(e.position));)if(39===s){if(A(e,a,e.position,!0),39!==(s=e.input.charCodeAt(++e.position)))return!0;a=e.position,e.position++,n=e.position}else h(s)?(A(e,a,n,!0),R(e,P(e,!1,t)),a=n=e.position):e.position===e.lineStart&&j(e)?S(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);S(e,"unexpected end of the stream within a single quoted scalar")}(e,v)||function(e,t){var s,a,n,r,i,o,c;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,s=a=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return A(e,s,e.position,!0),e.position++,!0;if(92===o){if(A(e,s,e.position,!0),h(o=e.input.charCodeAt(++e.position)))P(e,!1,t);else if(o<256&&_[o])e.result+=x[o],e.position++;else if((i=120===(c=o)?2:117===c?4:85===c?8:0)>0){for(n=i,r=0;n>0;n--)(i=y(o=e.input.charCodeAt(++e.position)))>=0?r=(r<<4)+i:S(e,"expected hexadecimal character");e.result+=w(r),e.position++}else S(e,"unknown escape sequence");s=a=e.position}else h(o)?(A(e,s,a,!0),R(e,P(e,!1,t)),s=a=e.position):e.position===e.lineStart&&j(e)?S(e,"unexpected end of the document within a double quoted scalar"):(e.position++,a=e.position)}S(e,"unexpected end of the stream within a double quoted scalar")}(e,v)?C=!0:function(e){var t,s,a;if(42!==(a=e.input.charCodeAt(e.position)))return!1;for(a=e.input.charCodeAt(++e.position),t=e.position;0!==a&&!g(a)&&!b(a);)a=e.input.charCodeAt(++e.position);return e.position===t&&S(e,"name of an alias node must contain at least one character"),s=e.input.slice(t,e.position),o.call(e.anchorMap,s)||S(e,'unidentified alias "'+s+'"'),e.result=e.anchorMap[s],P(e,!0,-1),!0}(e)?(C=!0,null===e.tag&&null===e.anchor||S(e,"alias node should not have any properties")):function(e,t,s){var a,n,r,i,o,c,l,d,u=e.kind,p=e.result;if(g(d=e.input.charCodeAt(e.position))||b(d)||35===d||38===d||42===d||33===d||124===d||62===d||39===d||34===d||37===d||64===d||96===d)return!1;if((63===d||45===d)&&(g(a=e.input.charCodeAt(e.position+1))||s&&b(a)))return!1;for(e.kind="scalar",e.result="",n=r=e.position,i=!1;0!==d;){if(58===d){if(g(a=e.input.charCodeAt(e.position+1))||s&&b(a))break}else if(35===d){if(g(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&j(e)||s&&b(d))break;if(h(d)){if(o=e.line,c=e.lineStart,l=e.lineIndent,P(e,!1,-1),e.lineIndent>=t){i=!0,d=e.input.charCodeAt(e.position);continue}e.position=r,e.line=o,e.lineStart=c,e.lineIndent=l;break}}i&&(A(e,n,r,!1),R(e,e.line-o),n=r=e.position,i=!1),f(d)||(r=e.position+1),d=e.input.charCodeAt(++e.position)}return A(e,n,r,!1),!!e.result||(e.kind=u,e.result=p,!1)}(e,v,1===s)&&(C=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===I&&(C=l&&L(e,T))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&S(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,u=e.implicitTypes.length;d<u;d+=1)if((m=e.implicitTypes[d]).resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(o.call(e.typeMap[e.kind||"fallback"],e.tag))m=e.typeMap[e.kind||"fallback"][e.tag];else for(m=null,d=0,u=(p=e.typeMap.multi[e.kind||"fallback"]).length;d<u;d+=1)if(e.tag.slice(0,p[d].tag.length)===p[d].tag){m=p[d];break}m||S(e,"unknown tag !<"+e.tag+">"),null!==e.result&&m.kind!==e.kind&&S(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result,e.tag)?(e.result=m.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):S(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||C}function D(e){var t,s,a,n,r=e.position,i=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(n=e.input.charCodeAt(e.position))&&(P(e,!0,-1),n=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==n));){for(i=!0,n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!g(n);)n=e.input.charCodeAt(++e.position);for(a=[],(s=e.input.slice(t,e.position)).length<1&&S(e,"directive name must not be less than one character in length");0!==n;){for(;f(n);)n=e.input.charCodeAt(++e.position);if(35===n){do{n=e.input.charCodeAt(++e.position)}while(0!==n&&!h(n));break}if(h(n))break;for(t=e.position;0!==n&&!g(n);)n=e.input.charCodeAt(++e.position);a.push(e.input.slice(t,e.position))}0!==n&&N(e),o.call(O,s)?O[s](e,s,a):C(e,'unknown document directive "'+s+'"')}P(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,P(e,!0,-1)):i&&S(e,"directives end mark is expected"),q(e,e.lineIndent-1,4,!1,!0),P(e,!0,-1),e.checkLineBreaks&&l.test(e.input.slice(r,e.position))&&C(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&j(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,P(e,!0,-1)):e.position<e.length-1&&S(e,"end of the stream or a document separator is expected")}function B(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var s=new I(e,t),a=e.indexOf("\0");for(-1!==a&&(s.position=a,S(s,"null byte is not allowed in input")),s.input+="\0";32===s.input.charCodeAt(s.position);)s.lineIndent+=1,s.position+=1;for(;s.position<s.length-1;)D(s);return s.documents}e.exports.loadAll=function(e,t,s){null!==t&&"object"==typeof t&&void 0===s&&(s=t,t=null);var a=B(e,s);if("function"!=typeof t)return a;for(var n=0,r=a.length;n<r;n+=1)t(a[n])},e.exports.load=function(e,t){var s=B(e,t);if(0!==s.length){if(1===s.length)return s[0];throw new n("expected a single document in the stream, but found more")}}},9279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringIsEmpty=function(e){return!/\S/.test(e)},t.titleCase=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.stripTrailingSlash=function(e){return e?e.replace(/\/+$/g,""):e}},9342:(e,t,s)=>{"use strict";var a=s(5388),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new a("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,s,a=0,r=e.length,i=n;for(s=0;s<r;s++)if(!((t=i.indexOf(e.charAt(s)))>64)){if(t<0)return!1;a+=6}return a%8==0},construct:function(e){var t,s,a=e.replace(/[\r\n=]/g,""),r=a.length,i=n,o=0,c=[];for(t=0;t<r;t++)t%4==0&&t&&(c.push(o>>16&255),c.push(o>>8&255),c.push(255&o)),o=o<<6|i.indexOf(a.charAt(t));return 0==(s=r%4*6)?(c.push(o>>16&255),c.push(o>>8&255),c.push(255&o)):18===s?(c.push(o>>10&255),c.push(o>>2&255)):12===s&&c.push(o>>4&255),new Uint8Array(c)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,s,a="",r=0,i=e.length,o=n;for(t=0;t<i;t++)t%3==0&&t&&(a+=o[r>>18&63],a+=o[r>>12&63],a+=o[r>>6&63],a+=o[63&r]),r=(r<<8)+e[t];return 0==(s=i%3)?(a+=o[r>>18&63],a+=o[r>>12&63],a+=o[r>>6&63],a+=o[63&r]):2===s?(a+=o[r>>10&63],a+=o[r>>4&63],a+=o[r<<2&63],a+=o[64]):1===s&&(a+=o[r>>2&63],a+=o[r<<4&63],a+=o[64],a+=o[64]),a}})},9378:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSuiteName=i,t.removeIdFromString=o,t.convertToSlug=d,t.getNameCombinedJmeterSeleniumFile=function(){let e=i();return e=o(e),e=r(e),e=n(e)+"-Combined-JMeter-and-Selenium.yaml",e},t.getNameSeleniumFile=function(e="yaml",t=""){let s=i();s=o(s),s=r(s);const a=t?"Selenium-":"Selenium";return s=n(s)+`-${a}${t}.${e}`,s},t.getNamePerformanceGuiFile=function(e="yaml",t=""){let s=i();s=o(s),s=r(s);const a=t?"PerformanceGui-":"PerformanceGui";return s=n(s)+`-${a}${t}.${e}`,s},t.getNameJmeterFile=function(){let e=i();return e=o(e),e=r(e),e=d(e)+".jmx",e},t.getSeleniumScenarioName=function(){let e=i();return e=o(e),e+"-Selenium"},t.getPerformanceGuiScenarioName=function(){let e=i();return e=o(e),e+"-PerformanceGui"},t.getJmeterScenarioName=function(){let e=i();return e=o(e),e+"-Http"},t.getNameCombinedJmeterSeleniumTest=function(e){let t=i();return e!==t?e:(t=o(t),l(t)&&(t=c(t),t="EUX Test recorded with Chrome Extension "+t),t)},t.getNameSeleniumTest=function(e){let t=i();return e!==t?e:(t=o(t),l(t)&&(t=c(t),t="GUI Functional Test recorded with Chrome Extension "+t),t)},t.getNamePerformanceGuiTest=function(e){let t=i();return e!==t?e:(t=o(t),l(t)&&(t=c(t),t="Performance Test recorded with Chrome Extension "+t),t)},t.getNameJmeterTest=function(e){let t=i();return e!==t?e:(t=o(t),l(t)&&(t=c(t),t="Performance Test recorded with Chrome Extension "+t),t)},t.getNameFunctionalTest=function(e){let t=i();return e!==t?e:(t=o(t),l(t)&&(t=c(t),t="API Functional Test recorded with Chrome Extension "+t),t)};const a=(0,s(1913).getRecorder)({});function n(e){for(;e.indexOf("/")>0;)e=e.replace("/","-");for(;e.indexOf(":")>0;)e=e.replace(":","-");return e}function r(e){return e.replace(/\s+/g,"_")}function i(){return a.currentSuite.suite_name}function o(e){return e.replace(/\s\(id:.*/,"")}function c(e){return e.replace(/^RECORD\s/,"")}function l(e){return e===a.defaultTestName}function d(e){return e.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"-").replace(/\s+/g,"-")}},9505:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validUrl=function(e){return/^(http|https|ftp):\/\/[a-z0-9]+([\-.][a-z0-9]+)*(:[0-9]{1,5})?(\/.*)?$/i.test(e)},t.parseURL=function(e){if(null==e||0===e.length)return"";const t={},s=e.indexOf("://"),a=e.substr(s+3,e.length);let n=a.indexOf("/");n=-1===n?a.length:n,t.domain=a.substr(0,n);const r=t.domain.split(".");switch(r.length){case 2:t.host=r[0],t.tld=r[1];break;case 3:t.host=r[1],t.tld=r[2];break;case 4:t.host=r[1],t.tld=r[2]+"."+r[3]}return t.host+"."+t.tld}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(s.exports,s,s.exports,__webpack_require__),s.exports}var __webpack_exports__={};(()=>{"use strict";__webpack_require__(4648);const e=__webpack_require__(9378),t=__webpack_require__(4508);__webpack_require__(9118),__webpack_require__(1913);const s={};s.getNameCombinedJmeterSeleniumFile=e.getNameCombinedJmeterSeleniumFile,s.getNameSeleniumFile=e.getNameSeleniumFile,s.getNameJmeterFile=e.getNameJmeterFile,s.getSeleniumScenarioName=e.getSeleniumScenarioName,s.getJmeterScenarioName=e.getJmeterScenarioName,s.getNameCombinedJmeterSeleniumTest=e.getNameCombinedJmeterSeleniumTest,s.getNameSeleniumTest=e.getNameSeleniumTest,s.getNameJmeterTest=e.getNameJmeterTest,s.getNameFunctionalTest=e.getNameFunctionalTest,s.getCombinedYaml=t.getCombinedYaml,s.getYamlJmeter=t.getYamlJmeter,s.getYamlJmeterFunctionalTest=t.getYamlJmeterFunctionalTest,s.getSuiteYAML=t.getSuiteYAML,s.getSuiteName=e.getSuiteName})()})();