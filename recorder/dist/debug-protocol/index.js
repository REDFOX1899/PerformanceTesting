(()=>{"use strict";var e={397:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},1666:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INITIALIZE_PUBLISH=t.SET_VARIABLE=t.READ_VARIABLES=t.HIGHLIGHT_OBJECT=t.CANCEL_PICK_OBJECT=t.PICK_OBJECT=t.EXECUTE_STEP=t.SET_IS_SKIPPED=t.SET_BREAKPOINT=t.UPDATE_MODEL=t.INITIALIZE=t.CONTINUE=t.NEXT=t.LAUNCH=t.TERMINATE=t.STEP_OUT=t.STEP_IN=t.RESUME=t.PAUSE=void 0,t.PAUSE="pause",t.RESUME="resume",t.STEP_IN="stepIn",t.STEP_OUT="stepOut",t.TERMINATE="terminate",t.LAUNCH="launch",t.NEXT="next",t.CONTINUE="continue",t.INITIALIZE="initialize",t.UPDATE_MODEL="updateModel",t.SET_BREAKPOINT="setBreakpoint",t.SET_IS_SKIPPED="setIsSkipped",t.EXECUTE_STEP="executeStep",t.PICK_OBJECT="pickObject",t.CANCEL_PICK_OBJECT="cancelPickObject",t.HIGHLIGHT_OBJECT="highlightObject",t.READ_VARIABLES="readVariables",t.SET_VARIABLE="setVariable",t.INITIALIZE_PUBLISH="initializePublish"},2335:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Application=void 0;const i=s(397),n=s(4660),r=s(1666),o=s(3794),a=s(3311),d=s(4373);t.Application=class{uuid;debugger;isActive=!1;handleCommand=e=>{const t=e.data.command,s={[r.PAUSE]:()=>this.debugger.pause(),[r.RESUME]:()=>this.debugger.resume(),[r.STEP_IN]:()=>this.debugger.stepIn(),[r.STEP_OUT]:()=>this.debugger.stepOut(),[r.TERMINATE]:()=>this.debugger.terminate(),[r.NEXT]:()=>this.debugger.next(),[r.CONTINUE]:()=>this.debugger.continue(),[r.LAUNCH]:()=>this.debugger.launch(),[r.SET_BREAKPOINT]:()=>this.debugger.setBreakpoint(e.data.arguments),[r.SET_IS_SKIPPED]:()=>this.debugger.setIsSkipped(e.data.arguments),[r.INITIALIZE]:()=>this.debugger.initialize(e.data.arguments),[r.UPDATE_MODEL]:()=>this.debugger.updateModel(e.data.arguments),[r.EXECUTE_STEP]:()=>this.debugger.executeStep(e.data.arguments),[r.PICK_OBJECT]:()=>this.debugger.pickObject(),[r.CANCEL_PICK_OBJECT]:()=>this.debugger.cancelPickObject(),[r.HIGHLIGHT_OBJECT]:()=>this.debugger.highlightObject(e.data.arguments),[r.READ_VARIABLES]:()=>this.debugger.readVariables(e.data.arguments),[r.SET_VARIABLE]:()=>this.debugger.setVariable(e.data.arguments),[r.INITIALIZE_PUBLISH]:()=>this.debugger.initializePublish(e.data.arguments)}[t];s&&s()};messageHandlers={[d.DEBUGGER_PING_V2]:a.pingv2Handler,[d.REQUEST]:this.handleCommand,[d.SCRIPTLESS_START_RECORDING]:e=>{chrome.runtime.sendMessage({...e.data}).catch((()=>{}))}};handleDisconnect(e){console.info("Disconnected from port...!",e.name),this.isActive=!1}initialiseDebugger(e){console.info("Debugger Initialized...",e),this.uuid=(0,i.generateUuid)(),this.isActive=!0,this.debugger=new o.DebuggerControl(this.uuid).onDisconnect(this.handleDisconnect.bind(this))}run(){console.info("Running Debug Protocol..."),this.initialiseDebugger("on-start"),chrome.runtime.onMessage.addListener(((e,t)=>{("refresh"===e.type||"stopped_recording"===e.type||"scriptless/start-recording-failed"===e.type)&&window.postMessage({...e},document.location.origin)})),window.addEventListener("message",(e=>{if((e.origin.endsWith(n.BZM_DOMAIN_COM)||e.origin.endsWith(n.BZM_DOMAIN_NET))&&e.data&&e.data.type){console.info("Message received ",e);const t=this.messageHandlers[e.data.type];try{t&&(this.isActive||(console.info("Found inactive debugger!! initializing again"),this.initialiseDebugger("on-message")),t(e))}catch(e){console.error(e)}}}))}}},3311:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pingv2Handler=function(){const e=chrome.runtime.getManifest();chrome.runtime.sendMessage({type:"get_status"}).then((t=>{const s={type:i.DEBUGGER_PONG_V2,status:t.op,extensionVersion:e.version};window.postMessage(s,location.origin)})).catch((()=>{}))};const i=s(4373)},3794:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerControl=void 0;const i=s(6792);t.DebuggerControl=class{port;constructor(e){this.port=new i.DebuggerPort(`dbg-${e}`),this.port.listen((e=>window.postMessage(e,location.origin)))}onDisconnect(e){return this.port.handleDisconnect(e),this}initialize(e){const t=e.scenario;t.steps=t.scenarioSteps,delete t.scenarioSteps,this.port.send({type:"request",command:"initialize",arguments:{...e,scenario:t}})}updateModel(e){const t=e.scenario;t.steps=t.scenarioSteps,delete t.scenarioSteps,this.port.send({type:"request",command:"updateModel",arguments:{...e,scenario:t}})}pause(){this.port.send({type:"request",command:"pause"})}resume(){this.port.send({type:"request",command:"resume"})}terminate(){this.port.send({type:"request",command:"terminate"})}stepIn(){this.port.send({type:"request",command:"stepIn"})}stepOut(){this.port.send({type:"request",command:"stepOut"})}launch(){this.port.send({type:"request",command:"launch"})}next(){this.port.send({type:"request",command:"next"})}continue(){this.port.send({type:"request",command:"continue"})}setBreakpoint(e){this.port.send({type:"request",command:"setBreakpoint",arguments:{...e}})}setIsSkipped(e){this.port.send({type:"request",command:"setIsSkipped",arguments:{...e}})}executeStep(e){this.port.send({type:"request",command:"executeStep",arguments:{...e}})}pickObject(){this.port.send({type:"request",command:"pickObject"})}cancelPickObject(){this.port.send({type:"request",command:"cancelPickObject"})}highlightObject(e){this.port.send({type:"request",command:"highlightObject",arguments:{...e}})}readVariables(e){this.port.send({type:"request",command:"readVariables",arguments:{...e}})}setVariable(e){this.port.send({type:"request",command:"setVariable",arguments:{...e}})}initializePublish(e){this.port.send({type:"request",command:"initializePublish",arguments:{...e}})}}},4373:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SCRIPTLESS_START_RECORDING=t.REQUEST=t.DEBUGGER_PONG_V2=t.DEBUGGER_PING_V2=void 0,t.DEBUGGER_PING_V2="debuggerPing.v2",t.DEBUGGER_PONG_V2="debuggerPong.v2",t.REQUEST="request",t.SCRIPTLESS_START_RECORDING="scriptless/start-recording"},4660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BZM_DOMAIN_COM=t.BZM_DOMAIN_NET=void 0,t.BZM_DOMAIN_NET="blazemeter.net",t.BZM_DOMAIN_COM="blazemeter.com"},6792:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerPort=void 0,t.DebuggerPort=class{port;constructor(e){this.port=chrome.runtime.connect({name:e})}getName(){return this.port.name}listen(e){this.port.onMessage.addListener(e)}send(e){this.port.postMessage(e)}close(){this.port.disconnect()}handleDisconnect(e){this.port.onDisconnect.addListener(e)}}}},t={};(new(function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}(2335).Application)).run()})();